!function(e){function t(t){for(var o,i,c=t[0],l=t[1],s=t[2],p=0,d=[];p<c.length;p++)i=c[p],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&d.push(r[i][0]),r[i]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);for(u&&u(t);d.length;)d.shift()();return a.push.apply(a,s||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,c=1;c<n.length;c++){var l=n[c];0!==r[l]&&(o=!1)}o&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var o={},r={0:0},a=[];function i(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var c=window.webpackJsonp=window.webpackJsonp||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var s=0;s<c.length;s++)t(c[s]);var u=l;a.push([382,1]),n()}({375:function(e,t){},382:function(e,t,n){n(818),e.exports=n(808)},806:function(e,t){},807:function(e,t){},808:function(e,t,n){var o=n(809);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(816)(o,r);o.locals&&(e.exports=o.locals)},809:function(e,t,n){(t=e.exports=n(54)(!1)).i(n(810),""),t.i(n(811),""),t.i(n(812),""),t.i(n(813),""),t.i(n(814),""),t.i(n(815),""),t.push([e.i,"/* ----------- Header ---------- */\nheader {\n  width: 100%;\n  height: 55px;\n  background-color: #7BCEFF;\n  box-shadow: 0 5px 5px #dbdbdb;\n  z-index: 10;\n  position: fixed;\n  top: 0;\n}\n\n.container,\n.search_bar,\n.add_card {\n  height: 100%;\n  display: flex;\n  flex-flow: row;\n  align-items: center;\n}\n\nheader>.container {\n  width: 98%;\n  margin: 0 auto;\n}\n\nheader>.container * {\n  padding: 0 5px;\n}\n\nheader>.container p {\n  color: white;\n  font-size: 18px;\n  font-weight: 700;\n  padding: 0;\n  min-width: 80px;\n}\n\nheader>.container>img {\n  height: 45px;\n  padding: 0 10px;\n  cursor: pointer;\n}\n\nheader>.container .icon {\n  height: 40px;\n  cursor: pointer;\n}\n\n\nheader .logo {\n  height: 40px;\n}\n\nheader>.container>.member {\n  height: 35px;\n  width: 35px;\n  background-size: cover;\n  margin: 0 5px 0 0;\n  border-radius: 50%;\n}\n\nheader>.container>.log_out {\n  color: white;\n  cursor: pointer;\n}\n\nheader>.container>.log_out:hover {\n  color: #FFE20E;\n  font-weight: 700;\n}\n\nheader>.container>.add_card {\n  margin-right: auto;\n  cursor: pointer;\n}\n\nheader>.container>.search_bar {\n  background-color: white;\n  height: 60%;\n  border-radius: 50px;\n  padding: 0;\n  padding-left: 10px;\n  margin-right: 15px;\n}\n\nheader>.container>.search_bar * {\n  padding: 0 3px;\n}\n\nheader>.container>.search_bar>input {\n  font-size: 16px;\n  max-width: 171px;\n}\n\nheader>.container>.search_bar_mobile {\n  display: none;\n}\n\n/* ----------- Header RWD ---------- */\n@media screen and (max-width: 650px) {\n  header>.container {\n    width: 100%;\n  }\n\n  header>.container * {\n    padding: 0 5px;\n  }\n\n  header>.container img {\n    height: 40px;\n  }\n\n  header .logo {\n    margin-left: 5px;\n  }\n\n  header>.container>.member {\n    margin: 0 15px 0 0;\n  }\n\n  header>.container>.log_out {\n    margin-left: 0;\n  }\n\n  header>.container>.add_card>p {\n    display: none;\n  }\n\n  header>.container>.search_bar {\n    display: none;\n  }\n\n  header>.container>.search_bar_mobile {\n    display: flex;\n  }\n\n  header>.container>.search_bar_mobile>.search_bar_mobile_input {\n    z-index: 10;\n    position: fixed;\n    top: 55px;\n    left: 0;\n    width: 100vw;\n    height: 55px;\n    background-color: white;\n    box-shadow: 0 5px 5px #dbdbdb;\n    flex-flow: row;\n    align-items: center;\n    justify-content: center;\n    display: flex;\n  }\n\n  .search_bar_mobile_input>input {\n    border-bottom: 2px solid rgb(181, 228, 255);\n    font-size: 16px;\n    padding: 5px;\n    width: calc(95vw - 50px);\n    border-radius: 0;\n  }\n\n}\n\n/* ----------- Background ---------- */\n.background {\n  width: 100%;\n  height: 160px;\n  position: absolute;\n  bottom: 0;\n  overflow: hidden;\n  z-index: -1;\n}\n\n.background>.background_triangle {\n  width: 0;\n  height: 0;\n  border-style: solid;\n  border-width: 80px 0 80px 100vw;\n  border-color: transparent transparent transparent rgb(231, 247, 255);\n}\n\n.background>.background_square {\n  height: 80px;\n  width: 100vw;\n  background-color: rgb(231, 247, 255);\n  position: absolute;\n  bottom: 0;\n}\n\n/* ---------- LoginPopup ----------- */\n.popup-overlay {\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  top: 0;\n  z-Index: 999;\n}\n\n.popup-content {\n  background: rgb(255, 255, 255);\n  border-radius: 10px;\n  margin: auto;\n  position: relative;\n  width: 290px;\n  color: white;\n}\n\n.modal {\n  font-size: 12px;\n}\n\n.modal>.header {\n  width: 100%;\n  height: 200px;\n  background-color: #7BCEFF;\n  font-size: 18px;\n  text-align: center;\n  padding: 5px;\n  border-radius: 10px 10px 0 0;\n}\n\n.modal>.header>img {\n  height: 70%;\n  width: 100%;\n  transform: rotate(-8deg);\n  padding-bottom: 10px;\n}\n\n.modal>.content {\n  width: 100%;\n  padding: 10px 5px;\n}\n\n.modal>.actions {\n  width: 100%;\n  padding: 10px 5px;\n  margin: auto;\n  text-align: center;\n}\n\n.modal>.actions>button {\n  width: 90%;\n  height: 40px;\n  margin: 5% auto;\n  font-size: 15px;\n  font-weight: bolder;\n  display: flex;\n  align-items: center;\n  justify-content: baseline;\n  flex-flow: row;\n  color: white;\n  border: none;\n  border-radius: 5px;\n}\n\n.modal>.actions>button:first-child {\n  background-color: #254ea6;\n}\n\n.modal>.actions>button:nth-child(2) {\n  background-color: #d84134;\n}\n\n.modal>.actions>button:nth-child(3) {\n  background-color: #686868;\n}\n\n.modal>.actions>button>img {\n  height: 100%;\n  width: 27%;\n}",""])},810:function(e,t,n){(t=e.exports=n(54)(!1)).push([e.i,"@import url(https://fonts.googleapis.com/css?family=Noto+Sans+TC);",""]),t.push([e.i,"/* ---------- Basic Setting ------------ */\n* {\n  box-sizing: border-box;\n  font-family: 'Noto Sans TC', sans-serif;\n}\n\nhtml,\nbody,\nheader,\nfooter,\nsection,\nh1,\nh2,\nh3,\nh4,\nh5,\nh6,\na,\np,\nul,\nli,\naside,\nnav,\nimg {\n  margin: 0;\n  padding: 0;\n}\n\na {\n  text-decoration: none;\n  cursor: pointer;\n}\n\nbutton {\n  outline: none;\n  cursor: pointer;\n}\n\ninput {\n  outline: none;\n  border: none;\n  border-radius: 0;\n}\n\ninput::placeholder {\n  color: rgb(230, 230, 230);\n  font-weight: 300;\n}\n\n#root {\n  position: relative;\n  height: 100%;\n  width: 100%;\n  min-height: calc(100vh - 85px);\n}\n\n.content {\n  width: 90%;\n  max-width: 1000px;\n  margin: 85px auto 30px auto;\n  display: flex;\n  flex-flow: row wrap;\n}\n\n/* ---------- input通用css設定 ---------- */\n.content input {\n  font-weight: 300;\n  margin: 10px 0;\n  padding: 10px 0;\n  color: #333333;\n  border-bottom: 2px solid #979797;\n}\n\n\n.content input::placeholder {\n  color: silver;\n  font-weight: 300;\n}\n\n.content input:focus {\n  border-bottom: 3px solid #FFE20E;\n}\n\n/* ---------- select通用css設定 ---------- */\n.select-box {\n  position: relative;\n  border: 2px solid rgb(235, 235, 235);\n  background-color: white;\n}\n\nselect {\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  appearance: none;\n  color: rgb(1, 192, 192);\n  padding: 10px;\n  padding-right: 30px;\n  outline: none;\n  border: none;\n  background-color: white;\n  font-size: 13px;\n}\n\n.arrow {\n  padding: 2px;\n  width: 30px;\n  height: 100%;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n/* 取消手機點擊hilight效果 */\ndiv {\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n}",""])},811:function(e,t,n){(e.exports=n(54)(!1)).push([e.i,".collection_info {\n  width: 100%;\n  display: flex;\n  align-items: baseline;\n  margin-bottom: 20px;\n}\n\n.collection_info>input {\n  width: 80%;\n  font-size: 25px;\n}\n\n.collection_info select {\n  width: 99%;\n  font-size: 14px;\n  background-image: url(/image/arrow.svg);\n  background-repeat: no-repeat;\n  background-position: right;\n  background-size: 25px;\n}\n\n.collection_info>.select-box {\n  margin-left: auto;\n  width: 18%;\n}\n\n.content>.add-from-file {\n  width: 100%;\n  margin: -10px 0 20px 0;\n  color: #5F5F5F;\n}\n\n.content>.add-from-file>label {\n  cursor: pointer;\n}\n\n.content>.add-from-file>label:hover {\n  color: rgb(1, 192, 192);\n}\n\n.content>.card_info {\n  width: 100%;\n  display: flex;\n  flex-flow: row wrap;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.content>.card_info .select-box {\n  width: 48%;\n  margin: 0 0 20px 0;\n}\n\n.content>.card_info .select-box select {\n  width: 99%;\n  font-size: 14px;\n  background-image: url(/image/arrow.svg);\n  background-repeat: no-repeat;\n  background-position: right;\n  background-size: 25px;\n}\n\n.making_card {\n  width: 100%;\n  padding: 20px 0;\n  background-color: white;\n  box-shadow: 5px 5px 5px #dbdbdb;\n  border: 1px solid #dbdbdb;\n  display: flex;\n  flex-flow: row;\n  align-items: center;\n  justify-content: space-around;\n  margin-bottom: 20px;\n}\n\n.making_card>input {\n  font-size: 18px;\n  font-weight: 300;\n  width: 40%;\n  margin: 0 10px 0 10px;\n}\n\n.making_card>.definition {\n  font-size: 15px;\n}\n\n.making_card .delete_card,\n.making_card .add_image {\n  width: 40px;\n  height: 40px;\n  cursor: pointer;\n}\n\n.making_card .loading_image {\n  width: 38px;\n  height: 38px;\n  background-image: url(/image/loading.gif);\n  background-size: cover;\n}\n\n.making_card .preview_image {\n  width: 24px;\n  height: 24px;\n  margin: 8px;\n  cursor: pointer;\n  background-size: cover;\n  background-repeat: no-repeat;\n  background-position: center;\n}\n\n.making_card .add_image {\n  background: url('/image/make_card_sprite.svg');\n  background-position: 0 0;\n  background-size: 200% 300%;\n}\n\n.making_card .add_image:hover {\n  background-position: -100% 0;\n}\n\n.making_card .delete_card {\n  background: url('/image/make_card_sprite.svg');\n  background-position: 0 -100%;\n  background-size: 200% 300%;\n}\n\n.making_card .delete_card:hover {\n  background-position: -100% -100%;\n}\n\n.content>.card_info .add_card {\n  background-color: white;\n  box-shadow: 5px 5px 5px #dbdbdb;\n  border: 1px dashed #dbdbdb;\n  width: 100%;\n  height: 86px;\n  margin-bottom: 20px;\n  text-align: center;\n  cursor: pointer;\n}\n\n.content>.card_info .add_card>span {\n  margin: 0 auto;\n  color: #797979;\n  line-height: 30px;\n  border-bottom: 2px solid rgb(1, 192, 192);\n}\n\n.content>.card_info .add_card:hover>span {\n  border-bottom: 2px solid #FFE20E;\n}\n\n.content button {\n  background-color: rgb(1, 192, 192);\n  color: white;\n  width: 100%;\n  max-width: 180px;\n  height: 40px;\n  border: none;\n  font-size: 15px;\n  font-weight: 700;\n  margin-top: 10px;\n  margin-left: auto;\n}\n\n/* ---------- RWD ---------- */\n@media screen and (max-width: 650px) {\n  .content>.add-from-file {\n    display: none;\n  }\n\n  .collection_info>input {\n    width: 100%;\n  }\n\n  .collection_info>.select-box {\n    width: 100%;\n  }\n\n  .content button {\n    max-width: 100%;\n  }\n\n  .collection_info {\n    flex-flow: column;\n    margin-bottom: 20px;\n  }\n\n  .making_card {\n    flex-flow: row wrap;\n    justify-content: flex-end;\n  }\n\n  .making_card img {\n    height: 35px;\n    margin-right: 1%;\n  }\n\n  .making_card>input {\n    width: 46%;\n    margin: 2%;\n  }\n}",""])},812:function(e,t,n){(e.exports=n(54)(!1)).push([e.i,".collection {\n  width: 30%;\n  min-height: 163px;\n  padding: 10px 20px;\n  margin: 0 1.6666%;\n  margin-bottom: 30px;\n  background-color: white;\n  box-shadow: 5px 5px 5px #dbdbdb;\n  outline: 1px solid #dbdbdb;\n  border-bottom: 2px solid white;\n  color: #333333;\n  cursor: pointer;\n  position: relative;\n}\n\n.first_time_hint {\n  width: 100%;\n  display: flex;\n  flex-flow: row wrap;\n}\n\n.first_time_hint h3 {\n  width: 100%;\n  margin: 0 2% 20px 2%;\n  color: rgb(1, 192, 192);\n  font-size: 18px;\n  text-align: center;\n  font-weight: 300;\n  border-bottom: 3px solid #FFE20E;\n  padding-bottom: 5px;\n}\n\n.first_time_hint .collection {\n  border: 1px dashed #dbdbdb;\n  display: flex;\n  flex-flow: row wrap;\n  align-items: center;\n  outline: none;\n}\n\n.first_time_hint .collection .wrap_new {\n  width: 100%;\n  display: flex;\n  flex-flow: row wrap;\n  align-items: center;\n}\n\n.first_time_hint .collection p {\n  text-align: center;\n  width: 100%;\n  margin-top: 5px;\n}\n\n.first_time_hint .collection .search_lan {\n  display: block;\n  width: 30%;\n  padding-bottom: 30%;\n  margin: 0 auto;\n}\n\n.collection:hover {\n  border-bottom: 3px solid #FF6D14;\n}\n\n.collection>h2 {\n  color: rgb(1, 192, 192);\n  border-bottom: 3px solid #FFE20E;\n  font-weight: 700;\n  margin-bottom: 10px;\n}\n\n.collection .new_card {\n  background-image: url('/image/new_card_sprite.svg');\n  background-size: 200%;\n  background-position: 0 0;\n}\n\n.collection:hover .new_card {\n  background-position: -100% 0;\n}\n\n.collection .recent_card {\n  background-image: url('/image/new_card_sprite.svg');\n  background-size: 200%;\n  background-position: 0 -100%;\n}\n\n.collection:hover .recent_card {\n  background-position: -100% -100%;\n}\n\n.collection .english {\n  background-image: url('/image/lan_sprite.svg');\n  background-size: 200% 300%;\n  background-position: 0 0;\n}\n\n.collection .english:hover {\n  background-position: -100% 0;\n}\n\n.collection .japanese {\n  background-image: url('/image/lan_sprite.svg');\n  background-size: 200% 300%;\n  background-position: 0 -100%;\n}\n\n.collection .japanese:hover {\n  background-position: -100% -100%;\n}\n\n.collection .korean {\n  background-image: url('/image/lan_sprite.svg');\n  background-size: 200% 300%;\n  background-position: 0 -200%;\n}\n\n.collection .korean:hover {\n  background-position: -100% -200%;\n}\n\n.collection .creator_grid {\n  display: grid;\n  grid-template-columns: 1fr 40px;\n  grid-template-rows: 32px;\n  margin: 15px 0 5px 0;\n  align-items: center;\n}\n\n.collection .creator_grid p {\n  font-size: 12px;\n  color: #979797;\n  text-align: right;\n}\n\n.collection .creator_grid img {\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  margin-left: auto;\n}\n\n.collection>.words_number {\n  font-size: 14px;\n  color: #979797;\n  text-align: left;\n}\n\n.collection .not_open {\n  width: 20px;\n  height: 20px;\n  background-image: url('/image/lock.svg');\n  background-size: cover;\n  position: absolute;\n  left: 20px;\n  bottom: 20px;\n}\n\n.search_none {\n  margin: 30px auto;\n  text-align: center;\n  color: #979797;\n  line-height: 50px;\n  font-weight: 300;\n}\n\n.white-overlay {\n  display: flex;\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  top: 0;\n}\n\n.white-overlay .loading {\n  width: 60px;\n  height: 60px;\n  margin: auto;\n}\n\n.page_location {\n  width: 100%;\n  margin: 0 2% 20px 2%;\n  color: rgb(211, 211, 211);\n  display: flex;\n  flex-flow: row;\n  align-items: center;\n}\n\n.page_location span {\n  font-size: 14px;\n}\n\n.page_location div {\n  cursor: pointer;\n}\n\n.page_location div:first-child {\n  margin-right: 10px;\n}\n\n.page_location div:last-child {\n  margin-left: 10px;\n}\n\n.page_active {\n  color: #979797;\n}\n\n/* ---------- RWD ---------- */\n@media screen and (max-width: 800px) {\n  .collection {\n    width: 45%;\n  }\n}\n\n@media screen and (max-width: 650px) {\n  .collection {\n    width: 100%;\n  }\n}",""])},813:function(e,t,n){(e.exports=n(54)(!1)).push([e.i,".content .arrows {\n  width: 100%;\n  display: flex;\n  margin: 20px 0;\n  justify-content: center;\n}\n\n.left-arrow {\n  background: url('/image/arrow_sprite.svg');\n  background-position: 0 0;\n  background-size: 80px;\n}\n\n.left-arrow:hover {\n  background-position: -40px 0;\n  background-size: 80px;\n  background-color: white;\n}\n\n.right-arrow {\n  background: url('/image/arrow_sprite.svg');\n  background-position: 0 -40px;\n  background-size: 80px;\n}\n\n.right-arrow:hover {\n  background-position: -40px -40px;\n  background-size: 80px;\n  background-color: white;\n}\n\n.left-arrow,\n.right-arrow {\n  border: 1px solid silver;\n  border-radius: 50%;\n  background-color: white;\n  cursor: pointer;\n  height: 40px;\n  width: 40px;\n  margin: 0 30px;\n}\n\n.content .cards_content {\n  overflow: hidden;\n  width: 70%;\n  margin: 0 auto;\n  position: relative;\n}\n\n.content .paging {\n  font-size: 18px;\n  color: silver;\n  position: absolute;\n  text-align: right;\n  top: 5px;\n  left: 10px;\n}\n\n.content .show_card {\n  border: 1px solid silver;\n  width: 100%;\n  max-width: 500px;\n  height: 350px;\n  display: flex;\n  flex-flow: column;\n  justify-content: center;\n  align-items: center;\n  background-color: white;\n  cursor: pointer;\n  position: relative;\n  margin: auto;\n  padding: 10px;\n}\n\n.text-align-center {\n  text-align: center;\n}\n\n.deletecheck-popup {\n  background: rgb(255, 255, 255);\n  border-radius: 10px;\n  margin: auto;\n  position: relative;\n  width: 290px;\n  height: 150px;\n  color: #333333;\n  display: flex;\n  flex-flow: row wrap;\n  justify-content: center;\n  align-items: center;\n  padding: 10px 20px;\n  font-size: 18px;\n  box-shadow: 0 0 10px;\n  overflow: hidden;\n  text-align: center;\n}\n\n.deletecheck-popup .cancel,\n.deletecheck-popup .confirm {\n  width: 30%;\n  margin: 10px 10% 0 10%;\n  padding: 3px;\n  background-color: white;\n  border-radius: 3px;\n  border: none;\n  font-size: 15px;\n  color: white;\n  z-index: 5;\n  text-align: center;\n  height: 34px;\n  line-height: 28px;\n  font-weight: 700;\n}\n\n.deletecheck-popup>.cancel {\n  background-color: rgb(1, 192, 192);\n}\n\n.deletecheck-popup>.confirm {\n  background-color: #E02D2D;\n}\n\n.deletecheck-popup-background {\n  width: 0;\n  height: 0;\n  border-style: solid;\n  border-width: 90px 0 0 100vw;\n  border-color: transparent transparent transparent rgb(231, 247, 255);\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  z-index: 2;\n}\n\n.wrap {\n  width: 100%;\n  position: relative;\n  margin: 50px 0 0 50px;\n}\n\n.features {\n  margin: 0 auto;\n  display: flex;\n  flex-flow: column;\n  position: absolute;\n  top: 0;\n  left: 0;\n}\n\n.content .feature_block {\n  width: 100px;\n  height: 100px;\n  border-bottom: 3px solid rgb(1, 192, 192);\n  box-shadow: 0 0 5px silver;\n  margin-bottom: 20px;\n  cursor: pointer;\n  display: flex;\n  flex-flow: column;\n  align-items: center;\n  color: #5f5f5f;\n  background-color: white;\n}\n\n.content .feature_block:hover {\n  border-bottom: 5px solid #FFE20E;\n}\n\n.feature_block .block_img {\n  width: 65px;\n  height: 65px;\n  background-size: cover;\n  font-size: 0;\n}\n\n.feature_block .card_test {\n  background: url('/image/feature_sprite.svg');\n  background-position: 0 0;\n  background-size: 130px 260px;\n}\n\n.feature_block:hover .card_test {\n  background-position: -65px 0;\n  background-size: 130px 260px;\n}\n\n.feature_block .match_game {\n  background: url('/image/feature_sprite.svg');\n  background-position: 0 -65px;\n  background-size: 130px 260px;\n}\n\n.feature_block:hover .match_game {\n  background-position: -65px -65px;\n  background-size: 130px 260px;\n}\n\n.feature_block .shuffle_card {\n  background: url('/image/feature_sprite.svg');\n  background-position: 0 -130px;\n  background-size: 130px 260px;\n}\n\n.feature_block:hover .shuffle_card {\n  background-position: -65px -130px;\n  background-size: 130px 260px;\n}\n\n.feature_block .add_to_learn {\n  background: url('/image/feature_sprite.svg');\n  background-position: 0 -195px;\n  background-size: 130px 260px;\n}\n\n.feature_block:hover .add_to_learn {\n  background-position: -65px -195px;\n  background-size: 130px 260px;\n}\n\n.content .edit-feature {\n  display: flex;\n  flex-flow: column;\n  position: absolute;\n  top: 0;\n  right: 0;\n}\n\n.content .edit-feature_block {\n  width: 45px;\n  height: 45px;\n  cursor: pointer;\n  border-radius: 50%;\n  box-shadow: 0 0 5px silver;\n  background-color: white;\n  margin: 5px 5px 10px 5px;\n}\n\n.content .edit-feature_block .block_img {\n  width: 100%;\n  height: 100%;\n  font-size: 0;\n  border-radius: 50%;\n}\n\n.edit-feature_block .hot_key {\n  background: url('/image/card_feature_sprite.svg');\n  background-position: 0 0;\n  background-size: 90px 180px;\n  background-color: white;\n}\n\n\n.edit-feature_block:hover .hot_key {\n  background-position: -45px 0;\n  background-size: 90px 180px;\n  background-color: white;\n}\n\n.edit-feature_block .exchange_cards {\n  background: url('/image/card_feature_sprite.svg');\n  background-position: 0 -45px;\n  background-size: 90px 180px;\n  background-color: white;\n}\n\n\n.edit-feature_block:hover .exchange_cards {\n  background-position: -45px -45px;\n  background-size: 90px 180px;\n  background-color: white;\n}\n\n.edit-feature_block .edit_collection {\n  background: url('/image/card_feature_sprite.svg');\n  background-position: 0 -90px;\n  background-size: 90px 180px;\n  background-color: white;\n}\n\n.edit-feature_block:hover .edit_collection {\n  background-position: -45px -90px;\n  background-size: 90px 180px;\n  background-color: white;\n}\n\n.edit-feature_block .delete_collection {\n  background: url('/image/card_feature_sprite.svg');\n  background-position: 0 -135px;\n  background-size: 90px 180px;\n  background-color: white;\n}\n\n.edit-feature_block:hover .delete_collection {\n  background-position: -45px -135px;\n  background-size: 90px 180px;\n  background-color: white;\n}\n\n.content .show_card p {\n  font-size: 25px;\n  color: #333333;\n  margin: -10px auto;\n}\n\n.img_wrap {\n  width: 50%;\n  padding-bottom: 50%;\n  position: relative;\n  margin-bottom: 10px;\n}\n\n.img_wrap img {\n  object-fit: cover;\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n}\n\n.content .show_card_hover {\n  color: white;\n  width: 100%;\n  height: 40px;\n  line-height: 40px;\n  padding-right: 10px;\n  text-align: right;\n  position: absolute;\n  bottom: 0;\n  visibility: hidden;\n}\n\n.content .show_card:hover .show_card_hover {\n  visibility: visible;\n}\n\n.white-overlay-cover {\n  display: flex;\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  top: 0;\n  background-color: white;\n  z-index: 5;\n}\n\n.white-overlay-cover .loading {\n  width: 60px;\n  height: 60px;\n  margin: auto;\n}\n\n.card_feature {\n  position: absolute;\n  top: 6px;\n  right: 8px;\n  display: flex;\n  flex-flow: row;\n}\n\n.card_feature div {\n  width: 35px;\n  height: 35px;\n}\n\n.card_feature .speak {\n  background-image: url('/image/speak_sprite.svg');\n  background-position-y: 0;\n  background-size: 70px;\n}\n\n.card_feature .star_card {\n  background: url('/image/speak_sprite.svg') 0 -35px;\n  background-size: 70px;\n}\n\n.card_feature .star_card_mark {\n  background: url('/image/speak_sprite.svg') -35px -35px;\n  background-size: 70px;\n}\n\n.card_flip_area {\n  width: 100%;\n  height: 100%;\n  margin: 35px 0;\n  display: flex;\n  flex-flow: column;\n  justify-content: center;\n  align-items: center;\n}\n\n.hot_key_popup {\n  height: 170px;\n}\n\n.keyarrow,\n.key_description {\n  display: flex;\n  flex-flow: row;\n  justify-content: center;\n  align-items: center;\n  z-index: 3;\n}\n\n.key_description {\n  width: 50%;\n}\n\n.keyarrow {\n  width: 35px;\n  height: 35px;\n  color: rgb(255, 196, 0);\n  font-weight: 700;\n  border: 1px solid rgb(255, 196, 0);\n  box-shadow: 2px 2px 0 rgb(255, 196, 0);\n  background-color: white;\n  border-radius: 5px;\n  margin-right: 8px;\n}\n\n.continue_test .familiarity_description {\n  font-size: 20px;\n  margin-bottom: 20px;\n  color: #5f5f5f;\n}\n\n.continue_test .average_percent {\n  font-size: 40px;\n  color: #333333;\n  margin-bottom: 40px;\n}\n\n/* ---------- RWD ---------- */\n@media screen and (max-width: 1000px) {\n  .content .cards_content {\n    width: 80%;\n  }\n}\n\n@media screen and (max-width: 880px) {\n  .content .cards_content {\n    width: 85%;\n  }\n}\n\n@media screen and (max-width: 850px) {\n  .content .wrap {\n    display: flex;\n    flex-flow: column;\n    margin: 0;\n  }\n\n  .features {\n    position: relative;\n    order: 2;\n    flex-flow: row wrap;\n  }\n\n  .feature_block {\n    margin: 10px;\n  }\n}\n\n@media screen and (max-width: 830px) {\n  .content .cards_content {\n    width: 100%;\n  }\n}\n\n@media screen and (max-width: 700px) {\n  .content .arrows {\n    margin: 10px 0;\n  }\n\n  .content .edit-feature {\n    position: relative;\n    flex-flow: row;\n    justify-content: flex-end;\n    margin-bottom: 10px;\n  }\n\n  .content .paging {\n    font-size: 12px;\n    top: 5px;\n    left: 10px;\n  }\n}\n\n\n@media screen and (max-width: 550px) {\n  .content .show_card {\n    height: 40vh;\n    min-height: 250px;\n  }\n\n  .content .show_card_hover span {\n    display: none;\n  }\n}\n\n@media screen and (max-width: 500px) {\n  .content .edit-feature_block {\n    width: 40px;\n    height: 40px;\n    margin-bottom: 0;\n  }\n\n  .edit-feature_block .hot_key {\n    background: url('/image/card_feature_sprite.svg');\n    background-position: 0 0;\n    background-size: 80px 160px;\n    background-color: white;\n  }\n\n\n  .edit-feature_block:hover .hot_key {\n    background-position: -40px 0;\n    background-size: 80px 160px;\n    background-color: white;\n  }\n\n  .edit-feature_block .exchange_cards {\n    background: url('/image/card_feature_sprite.svg');\n    background-position: 0 -40px;\n    background-size: 80px 160px;\n    background-color: white;\n  }\n\n\n  .edit-feature_block:hover .exchange_cards {\n    background-position: -40px -40px;\n    background-size: 80px 160px;\n    background-color: white;\n  }\n\n  .edit-feature_block .edit_collection {\n    background: url('/image/card_feature_sprite.svg');\n    background-position: 0 -80px;\n    background-size: 80px 160px;\n    background-color: white;\n  }\n\n  .edit-feature_block:hover .edit_collection {\n    background-position: -40px -80px;\n    background-size: 80px 160px;\n    background-color: white;\n  }\n\n  .edit-feature_block .delete_collection {\n    background: url('/image/card_feature_sprite.svg');\n    background-position: 0 -120px;\n    background-size: 80px 160px;\n    background-color: white;\n  }\n\n  .edit-feature_block:hover .delete_collection {\n    background-position: -40px -120px;\n    background-size: 80px 160px;\n    background-color: white;\n  }\n}\n\n\n@media screen and (max-width: 450px) {\n  .content .feature_block {\n    margin: 5px;\n    width: 80px;\n    height: 80px;\n  }\n\n  .feature_block .block_img {\n    width: 45px;\n    height: 45px;\n  }\n\n  .feature_block .card_test {\n    background: url('/image/feature_sprite.svg');\n    background-position: 0 0;\n    background-size: 90px 180px;\n  }\n\n  .feature_block:hover .card_test {\n    background-position: -45px 0;\n    background-size: 90px 180px;\n  }\n\n  .feature_block .match_game {\n    background: url('/image/feature_sprite.svg');\n    background-position: 0 -45px;\n    background-size: 90px 180px;\n  }\n\n  .feature_block:hover .match_game {\n    background-position: -45px -45px;\n    background-size: 90px 180px;\n  }\n\n  .feature_block .shuffle_card {\n    background: url('/image/feature_sprite.svg');\n    background-position: 0 -90px;\n    background-size: 90px 180px;\n  }\n\n  .feature_block:hover .shuffle_card {\n    background-position: -45px -90px;\n    background-size: 90px 180px;\n  }\n\n  .feature_block .add_to_learn {\n    background: url('/image/feature_sprite.svg');\n    background-position: 0 -135px;\n    background-size: 90px 180px;\n  }\n\n  .feature_block:hover .add_to_learn {\n    background-position: -45px -135px;\n    background-size: 90px 180px;\n  }\n\n  .content .show_card p {\n    font-size: 20px;\n  }\n}\n\n/* ---------- animation ---------- */\n.open {\n  animation-name: flipInX;\n  animation-duration: .5s;\n}\n\n@keyframes flipInX {\n  from {\n    transform: perspective(600px) rotate3d(1, 0, 0, 90deg);\n    animation-timing-function: ease-in;\n    opacity: 0;\n  }\n\n  40% {\n    transform: perspective(600px) rotate3d(1, 0, 0, -3deg);\n    animation-timing-function: ease-in;\n  }\n\n  60% {\n    transform: perspective(600px) rotate3d(1, 0, 0, 3deg);\n    opacity: 1;\n  }\n\n  80% {\n    transform: perspective(600px) rotate3d(1, 0, 0, 0deg);\n  }\n\n  to {\n    transform: perspective(600px);\n  }\n}\n\n.ease {\n  animation-name: ease-in-out;\n  animation-duration: .25s;\n}\n\n@keyframes ease-in-out {\n  from {\n    animation-timing-function: ease-in;\n    opacity: 0;\n  }\n\n  60% {\n    opacity: 0.5;\n  }\n\n  to {\n    opacity: 1;\n  }\n}",""])},814:function(e,t,n){(e.exports=n(54)(!1)).push([e.i,".test_area {\n  width: 100%;\n  display: flex;\n  justify-content: center;\n}\n\n.test_area button {\n  width: 200px;\n  max-width: none;\n  margin: 20px auto 0 auto;\n}\n\n.test_guide,\n.continue_test,\n.test {\n  text-align: center;\n  line-height: 30px;\n}\n\n.test_area h1 {\n  color: rgb(1, 192, 192);\n  border-bottom: 3px solid #FFE20E;\n  font-weight: 700;\n  margin-bottom: 20px;\n  line-height: 60px;\n}\n\n.test h1 {\n  border-bottom: none;\n}\n\n.test input {\n  font-size: 20px;\n  width: 90%;\n  max-width: 300px;\n}\n\n.back_to_collection {\n  position: fixed;\n  bottom: 30px;\n  right: 30px;\n  width: 50px;\n  height: 50px;\n  border-radius: 50%;\n  box-shadow: 0 0 5px silver;\n  background: url('/image/back_arrow_sprite.svg') 0 0;\n  background-position: 0 0;\n  background-size: 100px 50px;\n  background-color: white;\n}\n\n.back_to_collection:hover {\n  background-position: -50px 0;\n}",""])},815:function(e,t,n){(e.exports=n(54)(!1)).push([e.i,".game_area {\n  display: flex;\n  flex-flow: row wrap;\n  height: 100%;\n  width: 100%;\n}\n\n.game_time {\n  width: 100%;\n  text-align: center;\n  color: rgb(1, 192, 192);\n}\n\n.game_card {\n  border: 3px solid white;\n  width: 21%;\n  padding-bottom: 21%;\n  margin: 2%;\n  position: relative;\n  border-radius: 5%;\n  box-shadow: 0 0 3px silver;\n  cursor: pointer;\n  background-color: white;\n}\n\n.show_word {\n  box-sizing: border-box;\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 18px;\n  border-radius: 5%;\n  padding: 5px;\n}\n\n\n.active {\n  border: 3px solid #ffe20e;\n}\n\n.correct {\n  animation-name: pulse;\n  animation-duration: .75s;\n  border: 3px solid rgb(1, 192, 192);\n  visibility: hidden;\n}\n\n.wrong {\n  animation-name: rubberBand;\n  animation-duration: .25s;\n  border: 3px solid #e72d10;\n}\n\n/* ---------- RWD ---------- */\n@media screen and (max-width: 700px) {\n  .game_card {\n    width: 29.333%;\n    padding-bottom: 29.333%;\n    margin: 2%;\n  }\n\n  .game_time {\n    margin-bottom: 10px;\n  }\n\n  .show_word {\n    font-size: 15px;\n  }\n}\n\n/* ---------- animation ---------- */\n@keyframes pulse {\n  from {\n    transform: scale3d(1, 1, 1);\n    border: 3px solid #ffe20e;\n    visibility: visible;\n  }\n\n  60% {\n    transform: scale3d(1.1, 1.1, 1.1);\n    opacity: 0.8;\n  }\n\n  40% {\n    transform: scale3d(0.8, 0.8, 0.8);\n    opacity: 0.5;\n  }\n\n  to {\n    transform: scale3d(0.5, 0.5, 0.5);\n    border: 3px solid rgb(1, 192, 192);\n    opacity: 0;\n    visibility: hidden;\n  }\n}\n\n@keyframes rubberBand {\n  from {\n    transform: rotate(0deg);\n    border: 3px solid #e72d10;\n  }\n\n  20% {\n    transform: rotate(3deg);\n  }\n\n  40% {\n    transform: rotate(-3deg);\n  }\n\n  60% {\n    transform: rotate(3deg);\n  }\n\n  80% {\n    transform: rotate(-3deg);\n  }\n\n  to {\n    transform: rotate(0deg);\n    border: 3px solid #e72d10;\n  }\n}",""])},818:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),a=n(376),i=n.n(a),c=n(5),l=n(43),s=n(9),u=n(7),p=n(378),d=n(379),h="LOGIN_TO_WEB";var f="LOGOUT";function g(){return function(e,t,n){(0,n.getFirebase)().auth().signOut().then((function(){e({type:f}),window.location.href="/"})).catch((function(e){console.log(e),alert("發生問題請再試一次")}))}}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(n,!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v={loginState:{login:!1,user_name:"",user_id:"",user_photo:""}};var w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return b({},e,{loginState:{login:!0,user_name:t.user.displayName,user_id:t.user.uid,user_photo:t.user.photoURL?t.user.photoURL:"/image/user.svg"}});case f:return b({},e,{loginState:{login:!1,user_name:"",user_id:"",user_photo:""}});default:return e}},x="SEARCH_BAR_TOGGLE";function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E={mobileSearchBarOpen:!1};var O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E;switch((arguments.length>1?arguments[1]:void 0).type){case x:return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(n,!0).forEach((function(t){_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{mobileSearchBarOpen:!e.mobileSearchBarOpen});default:return e}};function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(n,!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var N="ADD_NEW_COLLECTION";var P="COPY_TO_SELF_COLLECTION";var T="UPDATE_COLLECTION";function I(e,t,n){return function(o,r,a){for(var i=a.getFirestore,c=e.content.slice(),l=0;l<c.length;l++)delete c[l].showWord,delete c[l].showDef,delete c[l].empty;i().collection("collection").doc(t).set(C({},e,{content:c})).then((function(){o({type:T,typeStr:n})})).catch((function(e){console.log(e),alert("發生問題請再試一次")}))}}var D="RESET_SUBMIT_STATUS";var z="DELETE_COLLECTION";var A="ALREADY_HAD_COLLECTION";function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(n,!0).forEach((function(t){L(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var B={collectionEmpty:!0,getCollection:!1,collection:{},submitStatus:""};var U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return H({},e,{submitStatus:t.typeStr});case P:return e;case T:return H({},e,{submitStatus:t.typeStr});case D:return H({},e,{submitStatus:""});case z:return e;case A:return H({},e,{collectionEmpty:t.status});default:return e}},F=n(90),M=n(10),W=Object(u.combineReducers)({mobileSearchBar:O,login:w,collection:U,firestore:F.firestoreReducer,firebase:M.firebaseReducer}),q=n(144),K=n.n(q);n(795),n(797),n(819);K.a.initializeApp({apiKey:"AIzaSyAgHnQn9hkMJvGRwuHEIwAdjLxMFTIWF_o",authDomain:"soy-transducer-236303.firebaseapp.com",databaseURL:"https://soy-transducer-236303.firebaseio.com",projectId:"soy-transducer-236303",storageBucket:"soy-transducer-236303.appspot.com"});var G=K.a.storage();function Q(e){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Z=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=J(t).call(this,e))||"object"!==Q(r)&&"function"!=typeof r?Y(o):r).state={logoutBlock:!1,logoutState:!1,keyword:"",loginRequest:!1},n.openSearchBarToggle=n.openSearchBarToggle.bind(Y(n)),n.loginRequestPopup=n.loginRequestPopup.bind(Y(n)),n.logoutBlockToggle=n.logoutBlockToggle.bind(Y(n)),n.logout=n.logout.bind(Y(n)),n.searchKeyword=n.searchKeyword.bind(Y(n)),n.startSearch=n.startSearch.bind(Y(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(t,e),n=t,(o=[{key:"openSearchBarToggle",value:function(){this.props.searchBarOpen()}},{key:"loginRequestPopup",value:function(e){"取消"===e.target.textContent?this.setState({loginRequest:!1}):this.setState({loginRequest:!0})}},{key:"logoutBlockToggle",value:function(){this.setState({logoutBlock:!this.state.logoutBlock})}},{key:"logout",value:function(){this.setState({logoutState:!0}),this.props.logout()}},{key:"searchKeyword",value:function(e){this.setState({keyword:e.target.value})}},{key:"startSearch",value:function(e){e.preventDefault(),""!==this.state.keyword.trim()?(window.location.hash="/Search/"+this.state.keyword.trim(),this.setState({keyword:""}),this.openSearchBarToggle()):this.setState({keyword:""})}},{key:"render",value:function(){return this.state.logoutState?r.a.createElement(l.a,{to:"/"}):("anonymous"===this.props.login.user_id?(e="登 入",t=r.a.createElement("div",{onClick:this.loginRequestPopup,className:"add_card"},r.a.createElement("img",{className:"add_card icon",src:"../../image/add card.svg"}),r.a.createElement("p",null,"建立字卡"))):(e="登 出",t=r.a.createElement(c.b,{to:"/MakingCards/new",exact:!0,className:"add_card"},r.a.createElement("img",{className:"add_card icon",src:"../../image/add card.svg"}),r.a.createElement("p",null,"建立字卡"))),r.a.createElement("header",null,r.a.createElement("div",{className:"popup-overlay",style:{display:this.state.loginRequest?"flex":"none"}},r.a.createElement("div",{className:"deletecheck-popup"},r.a.createElement("p",{style:{zIndex:5}},"立即登入 / 註冊建立字卡",r.a.createElement("br",null),"體驗完整功能！"),r.a.createElement("button",{className:"cancel",onClick:this.loginRequestPopup},"取消"),r.a.createElement("button",{className:"confirm",onClick:this.logout},"登入"),r.a.createElement("div",{className:"deletecheck-popup-background"}))),r.a.createElement("div",{className:"container"},r.a.createElement(c.b,{to:"/",exact:!0,style:{padding:0}},r.a.createElement("img",{src:"../../image/Logo.svg",className:"logo"})),t,this.props.children,r.a.createElement("form",{className:"search_bar",onSubmit:this.startSearch},r.a.createElement("input",{className:"search_input",onChange:this.searchKeyword,value:this.state.keyword,placeholder:"搜尋全站字卡集"}),r.a.createElement("img",{className:"search_btn icon",src:"../../image/search.svg",onClick:this.startSearch})),r.a.createElement("div",{className:"search_bar_mobile"},r.a.createElement("img",{className:"search_btn_top icon",src:"../../image/search_mobile.svg",onClick:this.openSearchBarToggle,style:{display:this.props.searchBarToggle?"none":"block"}}),r.a.createElement("img",{className:"search_btn_top icon",src:"../../image/close.svg",onClick:this.openSearchBarToggle,style:{display:this.props.searchBarToggle?"flex":"none"}}),r.a.createElement("form",{className:"search_bar_mobile_input",style:{display:this.props.searchBarToggle?"flex":"none"},onSubmit:this.startSearch},r.a.createElement("input",{className:"search_input",onChange:this.searchKeyword,value:this.state.keyword,placeholder:"搜尋全站字卡集"}),r.a.createElement("img",{className:"search_btn_down icon",src:"../../image/search.svg",onClick:this.startSearch}))),r.a.createElement("div",{className:"log_out",style:{display:this.state.logoutBlock?"block":"none"},onClick:this.logout},e),r.a.createElement("div",{className:"member icon",style:{backgroundImage:this.props.login.login?"url(".concat(this.props.login.user_photo,")"):"url('../../image/user.svg')"},onClick:this.logoutBlockToggle}))));var e,t}}])&&X(n.prototype,o),a&&X(n,a),t}(r.a.Component),$=Object(s.b)((function(e){return{searchBarToggle:e.mobileSearchBar.mobileSearchBarOpen,login:e.login.loginState}}),(function(e){return{searchBarOpen:function(){e({type:x})},logout:function(){e(g())}}}))(Z);var ee=function(){return r.a.createElement("div",{className:"background"},r.a.createElement("div",{className:"background_triangle"}),r.a.createElement("div",{className:"background_square"}))};function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ne(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ae(e,t){return(ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ie=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=oe(t).call(this,e))||"object"!==te(r)&&"function"!=typeof r?re(o):r).state={showDescription:!1},n.login=n.login.bind(re(n)),n.logout=n.logout.bind(re(n)),n.showGuestDesHandler=n.showGuestDesHandler.bind(re(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ae(e,t)}(t,e),n=t,(o=[{key:"login",value:function(e){var t;t="使用 Facebook 登入"===e.target.textContent?"facebook":"使用 Google 登入"===e.target.textContent?"google":"",this.props.login_reducer(t)}},{key:"logout",value:function(){this.setState({logoutState:!0}),this.props.logout()}},{key:"showGuestDesHandler",value:function(){this.setState({showDescription:!0})}},{key:"componentDidMount",value:function(){this.props.loginCheck()}},{key:"render",value:function(){return r.a.createElement("div",{className:"popup-overlay",style:{display:this.props.login.login?"none":"flex"}},r.a.createElement("div",{className:"popup-overlay",style:{display:this.state.showDescription?"none":"flex",backgroundColor:"rgba(0,0,0,0)"}},r.a.createElement("div",{className:"popup-content"},r.a.createElement("div",{className:"modal"},r.a.createElement("div",{className:"header"},r.a.createElement("img",{src:"../../image/Logo.svg"}),"馬上登入 / 註冊建立字卡學習"),r.a.createElement("div",{className:"actions"},r.a.createElement("button",{className:"button",onClick:this.login},r.a.createElement("img",{src:"../../image/facebook.svg"}),"使用 Facebook 登入"),r.a.createElement("button",{className:"button",onClick:this.login},r.a.createElement("img",{src:"../../image/google.svg"}),"使用 Google 登入"),r.a.createElement("button",{className:"button",onClick:this.showGuestDesHandler},r.a.createElement("img",{src:"../../image/user.svg"}),"使用 訪客身份 瀏覽"))))),r.a.createElement("div",{className:"deletecheck-popup",style:{height:"397px",padding:0,display:this.state.showDescription?"block":"none"}},r.a.createElement("img",{src:"/image/description.svg"}),r.a.createElement("button",{className:"cancel",onClick:this.login},"先逛逛"),r.a.createElement("button",{className:"confirm",onClick:this.logout},"登入 / 註冊")))}}])&&ne(n.prototype,o),a&&ne(n,a),t}(r.a.Component),ce=Object(s.b)((function(e){return{login:e.login.loginState}}),(function(e){return{login_reducer:function(t){e(function(e){return function(t,n,o){var r=(0,o.getFirebase)();if(""!==e)"facebook"===e?e=new r.auth.FacebookAuthProvider:"google"===e&&(e=new r.auth.GoogleAuthProvider),r.auth().signInWithPopup(e).then((function(e){var n=e.user;t({type:h,user:n})})).catch((function(e){"auth/missing-or-invalid-nonce"!==e.code&&(console.log(e),alert("發生問題請再試一次"))}));else{t({type:h,user:{displayName:"訪客",uid:"anonymous",photoURL:null}})}}}(t))},loginCheck:function(){e((function(e,t,n){(0,n.getFirebase)().auth().onAuthStateChanged((function(t){t&&e({type:h,user:t})}))}))},logout:function(){e(g())}}}))(ie);var le=function(e){var t;return e.public||(t=r.a.createElement("div",{className:"not_open"})),r.a.createElement(c.b,{to:"/Collection/"+e.id,className:"collection"},r.a.createElement("h2",null,e.title),r.a.createElement("p",{className:"words_number"},"語言：",e.wordLan," / ",e.defLan),r.a.createElement("p",{className:"words_number"},"詞語：",e.contentLength," 個"),r.a.createElement("div",{className:"creator_grid"},r.a.createElement("p",null,e.author),r.a.createElement("img",{src:e.user_photo})),t)};function se(e){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ue(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function pe(e){return(pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function de(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function he(e,t){return(he=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var fe=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=pe(t).call(this,e))||"object"!==se(r)&&"function"!=typeof r?de(o):r).state={pageLocation:"self",selfActive:"page_active",wholeActive:"",guestMode:!1},n.changePage=n.changePage.bind(de(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&he(e,t)}(t,e),n=t,(o=[{key:"changePage",value:function(e){"你的字卡集"===e.target.textContent?this.setState({pageLocation:"self",selfActive:"page_active",wholeActive:""}):this.setState({pageLocation:"whole",selfActive:"",wholeActive:"page_active"})}},{key:"componentDidUpdate",value:function(e){this.props!==e&&"anonymous"===this.props.login.user_id&&this.setState({pageLocation:"whole",selfActive:"",wholeActive:"page_active",guestMode:!0})}},{key:"render",value:function(){var e=this.props.login.user_id,t=this.props.collectionInfo,n=!0;return void 0!==t&&("self"===this.state.pageLocation?t=t.filter((function(t){return t.user_id===e})):(t=t.filter((function(e){return e.public}))).splice(9),0===t.length?this.props.alreadyHadCollection(!1):this.props.alreadyHadCollection(!0),n=this.props.hadCollection),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"page_location",style:{display:this.props.login.login?"flex":"none"}},r.a.createElement("div",{onClick:this.changePage,className:this.state.selfActive,style:{display:this.state.guestMode?"none":"block"}},"你的字卡集"),r.a.createElement("span",{style:{display:this.state.guestMode?"none":"block"}},"|"),r.a.createElement("div",{onClick:this.changePage,className:this.state.wholeActive,style:{marginLeft:this.state.guestMode?0:"10px"}},"全站近期新增")),r.a.createElement("div",{style:{display:this.props.login.login?"flex":"none",width:"100%"}},r.a.createElement("div",{style:{display:n?"none":"flex"},className:"first_time_hint"},r.a.createElement("h3",null,"任選一個方式開始吧！"),r.a.createElement(c.b,{to:"/MakingCards/new",exact:!0,className:"collection"},r.a.createElement("div",{className:"wrap_new"},r.a.createElement("div",{className:"search_lan new_card"}),r.a.createElement("p",null,"新建自己的字卡"))),r.a.createElement("div",{onClick:this.changePage,className:"collection"},r.a.createElement("div",{className:"wrap_new"},r.a.createElement("div",{className:"search_lan recent_card"}),r.a.createElement("p",null,"看看其他人的字卡"))),r.a.createElement("div",{className:"collection"},r.a.createElement("div",{className:"wrap_new"},r.a.createElement(c.b,{className:"search_lan english",to:"/Search/英文",exact:!0}),r.a.createElement(c.b,{className:"search_lan japanese",to:"/Search/日文",exact:!0}),r.a.createElement(c.b,{className:"search_lan korean",to:"/Search/韓文",exact:!0}),r.a.createElement("p",null,"搜尋特定語言"))))),t&&t.map((function(e,t){return r.a.createElement(le,{key:t,title:e.title,contentLength:e.content.length,wordLan:e.word_lan.text,defLan:e.definition_lan.text,author:e.author,id:e.id,public:e.public,user_photo:e.user_photo})})))}}])&&ue(n.prototype,o),a&&ue(n,a),t}(r.a.Component),ge=Object(u.compose)(Object(s.b)((function(e){return{hadCollection:e.collection.collectionEmpty,collectionInfo:e.firestore.ordered.collection,login:e.login.loginState}}),(function(e){return{alreadyHadCollection:function(t){e(function(e){return{type:A,status:e}}(t))}}})),Object(M.firestoreConnect)([{collection:"collection",orderBy:["timestamp","desc"]}]))(fe);function me(e){return(me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function be(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ye(e,t){return!t||"object"!==me(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ve(e){return(ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function we(e,t){return(we=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var xe=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ye(this,ve(t).call(this,e))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&we(e,t)}(t,e),n=t,(o=[{key:"render",value:function(){var e=this.props.login.user_id,t=this.props.collectionInfo,n=!1,o="",a=this.props.match.params.keyword;return void 0!==t&&(0===(t=(t=t.filter((function(t){return t.user_id===e||t.public}))).filter((function(e){return e.title.toUpperCase().trim().includes(a.toUpperCase())||e.author.toUpperCase().trim().includes(a.toUpperCase())||e.definition_lan.text.trim().includes(a)||e.word_lan.text.trim().includes(a)}))).length?(n=!0,o=""):o=r.a.createElement("div",{className:"page_location page_active"},"搜尋結果（",t.length,"）")),r.a.createElement("div",{className:"content"},o,t&&t.map((function(e,t){return r.a.createElement(le,{key:t,title:e.title,contentLength:e.content.length,wordLan:e.word_lan.text,defLan:e.definition_lan.text,author:e.author,id:e.id,public:e.public,user_photo:e.user_photo})})),r.a.createElement("h2",{className:"search_none",style:{display:n?"block":"none"}},"抱歉！無此關鍵字字卡集",r.a.createElement("br",null),"請使用其他關鍵字試試看"))}}])&&be(n.prototype,o),a&&be(n,a),t}(r.a.Component),ke=Object(u.compose)(Object(s.b)((function(e){return{collectionInfo:e.firestore.ordered.collection,login:e.login.loginState}}),null),Object(M.firestoreConnect)([{collection:"collection",orderBy:["timestamp","desc"]}]))(xe);function _e(e){return(_e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ee(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Oe(e){return(Oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Se(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ce(e,t){return(Ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var je=function(e){function t(e){var n,o,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(a=Oe(t).call(this,e))||"object"!==_e(a)&&"function"!=typeof a?Se(o):a).state={previewImgToggle:!1},n.textInput=r.a.createRef(),n.focusTextInput=n.focusTextInput.bind(Se(n)),n.wordInputHandler=n.wordInputHandler.bind(Se(n)),n.defInputHandler=n.defInputHandler.bind(Se(n)),n.uploadImgHandler=n.uploadImgHandler.bind(Se(n)),n.previewImg=n.previewImg.bind(Se(n)),n.deleteImgHandler=n.deleteImgHandler.bind(Se(n)),n.deleteCardHandler=n.deleteCardHandler.bind(Se(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ce(e,t)}(t,e),n=t,(o=[{key:"focusTextInput",value:function(){this.textInput.current.focus()}},{key:"wordInputHandler",value:function(e){this.props.wordChange(this.props,e.target.value)}},{key:"defInputHandler",value:function(e){this.props.definitionChange(this.props,e.target.value)}},{key:"uploadImgHandler",value:function(e){this.props.compressImg(this.props,e)}},{key:"previewImg",value:function(e){"取消"===e.target.textContent?this.setState({previewImgToggle:!1}):this.setState({previewImgToggle:!0})}},{key:"deleteImgHandler",value:function(){this.props.deleteImg(this.props),this.setState({previewImgToggle:!1})}},{key:"deleteCardHandler",value:function(){this.props.deleteCard(this.props)}},{key:"componentDidUpdate",value:function(e){e.empty!==this.props.empty&&this.focusTextInput()}},{key:"render",value:function(){var e;return e=""===this.props.pictureName?r.a.createElement("label",{onChange:this.uploadImgHandler,className:"add_image",title:"增加圖片"}," ",r.a.createElement("input",{type:"file",style:{display:"none"},accept:"image/*"})," "):"loading"===this.props.pictureName?r.a.createElement("div",{className:"loading_image"}):r.a.createElement("div",{onClick:this.previewImg,className:"preview_image",style:{backgroundImage:"url(".concat(this.props.pictureURL,")")},title:"預覽圖片"}),r.a.createElement("div",{className:"making_card ease"},r.a.createElement("div",{className:"popup-overlay",style:{display:this.state.previewImgToggle?"flex":"none"}},r.a.createElement("div",{className:"deletecheck-popup",style:{height:"330px"}},r.a.createElement("p",null,"圖片預覽"),r.a.createElement("div",{style:{zIndex:5,border:"1px dashed silver",width:"80%",paddingBottom:"80%"},className:"img_wrap"},r.a.createElement("img",{src:this.props.pictureURL})),r.a.createElement("button",{className:"cancel",onClick:this.previewImg},"取消"),r.a.createElement("button",{className:"confirm",onClick:this.deleteImgHandler},"刪除"),r.a.createElement("div",{className:"deletecheck-popup-background"}))),r.a.createElement("input",{placeholder:"詞語",ref:this.textInput,onChange:this.wordInputHandler,value:this.props.word,style:{borderBottom:this.props.empty}}),r.a.createElement("input",{placeholder:"定義",onChange:this.defInputHandler,value:this.props.definition,style:{borderBottom:this.props.empty}}),e,r.a.createElement("div",{onClick:this.deleteCardHandler,className:"delete_card",title:"刪除字卡"}))}}])&&Ee(n.prototype,o),a&&Ee(n,a),t}(r.a.Component),Ne=n(381);function Pe(e){return(Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Te(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function De(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ie(n,!0).forEach((function(t){ze(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ie(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ae(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Re(e){return(Re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function He(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Le(e,t){return(Le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Be=function(e){function t(e){var n,o,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(a=Re(t).call(this,e))||"object"!==Pe(a)&&"function"!=typeof a?He(o):a).state={collection:{title:"",public:!0,word_lan:{lan:"en-US",text:"英文"},definition_lan:{lan:"en-US",text:"英文"},user_photo:n.props.login.user_photo,user_id:n.props.login.user_id,author:n.props.login.user_name,content:[{word:"",definition:"",familiarity:0,pictureURL:"",pictureName:"",empty:""},{word:"",definition:"",familiarity:0,pictureURL:"",pictureName:"",empty:""}]},borderBottom:"",submitOK:"",language:[{lan:"en-US",text:"英文"},{lan:"zh-TW",text:"中文"},{lan:"ja-JP",text:"日文"},{lan:"ko-KR",text:"韓文"},{lan:"fr-FR",text:"法文"},{lan:"hi-IN",text:"印度文"},{lan:"pl-PL",text:"波蘭文"},{lan:"id-ID",text:"印尼文"},{lan:"nl-NL",text:"荷蘭文"},{lan:"es-ES",text:"西班牙文"},{lan:"it-IT",text:"義大利文"},{lan:"pt-BR",text:"葡萄牙文"},{lan:"ru-RU",text:"俄羅斯文"}]},n.textInput=r.a.createRef(),n.focusTextInput=n.focusTextInput.bind(He(n)),n.changeTitle=n.changeTitle.bind(He(n)),n.changePublicState=n.changePublicState.bind(He(n)),n.changeWordLan=n.changeWordLan.bind(He(n)),n.changeDefinitionLan=n.changeDefinitionLan.bind(He(n)),n.wordChange=n.wordChange.bind(He(n)),n.definitionChange=n.definitionChange.bind(He(n)),n.addNewCard=n.addNewCard.bind(He(n)),n.deleteCard=n.deleteCard.bind(He(n)),n.compressImg=n.compressImg.bind(He(n)),n.uploadImg=n.uploadImg.bind(He(n)),n.deleteImg=n.deleteImg.bind(He(n)),n.uploadXlsx=n.uploadXlsx.bind(He(n)),n.submitCollection=n.submitCollection.bind(He(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Le(e,t)}(t,e),n=t,(o=[{key:"focusTextInput",value:function(){this.textInput.current.focus()}},{key:"changeTitle",value:function(e){this.setState({collection:De({},this.state.collection,{title:e.target.value}),borderBottom:""})}},{key:"changePublicState",value:function(e){"open"===e.target.value?this.setState({collection:De({},this.state.collection,{public:!0})}):this.setState({collection:De({},this.state.collection,{public:!1})})}},{key:"changeWordLan",value:function(e){var t;this.state.language.forEach((function(n){n.lan===e.target.value&&(t=n.text)})),this.setState({collection:De({},this.state.collection,{word_lan:{lan:e.target.value,text:t}})})}},{key:"changeDefinitionLan",value:function(e){var t;this.state.language.forEach((function(n){n.lan===e.target.value&&(t=n.text)})),this.setState({collection:De({},this.state.collection,{definition_lan:{lan:e.target.value,text:t}})})}},{key:"wordChange",value:function(e,t){var n=this.state.collection.content.slice();n[e.label].word=t,""!==n[e.label].empty&&(n[e.label].empty=""),this.setState({collection:De({},this.state.collection,{content:n})})}},{key:"definitionChange",value:function(e,t){var n=this.state.collection.content.slice();n[e.label].definition=t,""!==n[e.label].empty&&(n[e.label].empty=""),this.setState({collection:De({},this.state.collection,{content:n})})}},{key:"addNewCard",value:function(){this.state.collection.content.length>100?alert("一個字卡集最多只能放置100個字"):this.setState({collection:De({},this.state.collection,{content:[].concat(Te(this.state.collection.content),[{word:"",definition:"",familiarity:0,pictureURL:"",pictureName:"",empty:""}])})})}},{key:"deleteCard",value:function(e){var t=this.state.collection.content.slice();t.splice(e.label,1),t.length>=2&&this.setState({collection:De({},this.state.collection,{content:t})})}},{key:"compressImg",value:function(e,t){var n=this,o=t.target.files[0];this.getOrientation(o,(function(t){var r=new FileReader;r.readAsDataURL(o),r.onload=function(r){var a=new Image;a.src=r.target.result,a.onload=function(){var r,i,c=document.createElement("canvas"),l=c.getContext("2d");if(a.width>299){r=300;var s=300/a.width;i=a.height*s}else r=a.width,i=a.height;switch(4<t&&t<9?(c.width=i,c.height=r):(c.width=r,c.height=i),t){case 2:l.transform(-1,0,0,1,r,0);break;case 3:l.transform(-1,0,0,-1,r,i);break;case 4:l.transform(1,0,0,-1,0,i);break;case 5:l.transform(0,1,1,0,0,0);break;case 6:l.transform(0,1,-1,0,i,0);break;case 7:l.transform(0,-1,-1,0,i,r);break;case 8:l.transform(0,-1,1,0,0,r)}l.drawImage(a,0,0,r,i),l.canvas.toBlob((function(t){var r=new File([t],o.name,{type:"image/jpeg",lastModified:Date.now()});n.uploadImg(e,r)}),"image/jpeg",1)}}}))}},{key:"getOrientation",value:function(e,t){var n=new FileReader;n.onload=function(e){var n=new DataView(e.target.result);if(65496!==n.getUint16(0,!1))return t(-2);for(var o=n.byteLength,r=2;r<o;){if(n.getUint16(r+2,!1)<=8)return t(-1);var a=n.getUint16(r,!1);if(r+=2,65505===a){if(1165519206!==n.getUint32(r+=2,!1))return t(-1);var i=18761===n.getUint16(r+=6,!1);r+=n.getUint32(r+4,i);var c=n.getUint16(r,i);r+=2;for(var l=0;l<c;l++)if(274===n.getUint16(r+12*l,i))return t(n.getUint16(r+12*l+8,i))}else{if(65280!=(65280&a))break;r+=n.getUint16(r,!1)}}return t(-1)},n.readAsArrayBuffer(e)}},{key:"uploadImg",value:function(e,t){var n=this,o=this.state.collection.content.slice(),r=(new Date).getTime()+t.name;G.ref("images/".concat(r)).put(t).on("state_changed",(function(){o[e.label].pictureName="loading",n.setState({collection:De({},n.state.collection,{content:o})})}),(function(e){alert("圖片上傳發生問題請再試一次"),console.log(e)}),(function(){G.ref("images").child(r).getDownloadURL().then((function(t){o[e.label].pictureURL=t,o[e.label].pictureName=r,n.setState({collection:De({},n.state.collection,{content:o})})}))}))}},{key:"deleteImg",value:function(e){var t=this.state.collection.content.slice();t[e.label].pictureURL="",t[e.label].pictureName="",this.setState({collection:De({},this.state.collection,{content:t})}),"new"===this.props.match.params.id&&this.deleteImgFromStorage(e.pictureName)}},{key:"deleteImgFromStorage",value:function(e){G.ref("images").child(e).delete().then((function(){console.log("圖片從資料庫刪除成功")})).catch((function(e){alert("發生問題請再試一次"),console.log(e)}))}},{key:"uploadXlsx",value:function(e){var t=this,n=[],o=e.target.files,r=o[0];if(o[0]){var a=new FileReader;a.onload=function(e){for(var o=new Uint8Array(e.target.result),r=Object(Ne.read)(o,{type:"array"}),a=r.SheetNames[0],i=r.Sheets[a],c=1;c<101&&void 0!==i["A".concat(c)];c++)n.push({word:i["A".concat(c)].v,definition:i["B".concat(c)].v,familiarity:0,pictureURL:"",pictureName:"",empty:""});t.setState({collection:De({},t.state.collection,{content:n})})},a.readAsArrayBuffer(r)}}},{key:"submitCollection",value:function(e){for(var t=this.state.collection.content.slice(),n=!1,o=0;o<t.length;o++)""!==t[o].word&&""!==t[o].definition||(t[o].empty="3px solid red",n=!0);if(this.setState({collection:De({},this.state.collection,{content:t})}),""===this.state.collection.title)this.setState({borderBottom:"3px solid red"}),this.focusTextInput();else{if(n)return;if("建立"===e.target.textContent)this.props.addNewCollection(this.state.collection,"建立");else if("更新"===e.target.textContent){var r=this.props.match.params.id;this.props.updateCollection(this.state.collection,r,"更新")}}}},{key:"componentDidMount",value:function(){"new"!==this.props.match.params.id&&null!==this.props.editCollection&&this.setState({collection:this.props.editCollection}),this.props.resetSubmitStatus()}},{key:"componentDidUpdate",value:function(e){this.props!==e&&(this.setState({submitOK:this.props.submitStatus}),"new"!==this.props.match.params.id&&null!==this.props.editCollection&&this.setState({collection:this.props.editCollection}))}},{key:"render",value:function(){var e,t=this;e="new"===this.props.match.params.id;var n=this.state.collection.public;return n=n?"open":"close","建立"!==this.state.submitOK&&this.props.login.login&&"anonymous"!==this.props.login.user_id?"更新"===this.state.submitOK?r.a.createElement(l.a,{to:"/Collection/"+this.props.match.params.id}):r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"collection_info"},r.a.createElement("input",{placeholder:"字卡集標題",ref:this.textInput,onChange:this.changeTitle,style:{borderBottom:this.state.borderBottom},value:this.state.collection.title}),r.a.createElement("div",{className:"select-box"},r.a.createElement("select",{onChange:this.changePublicState,value:n},r.a.createElement("option",{value:"open"},"公開"),r.a.createElement("option",{value:"close"},"不公開")))),r.a.createElement("div",{className:"add-from-file"},r.a.createElement("label",{onChange:this.uploadXlsx}," + 從 xlsx 檔案匯入",r.a.createElement("span",{style:{color:"silver"}},"（請將詞語放置 A 欄，定義放置 B 欄）"),r.a.createElement("input",{type:"file",style:{display:"none"},accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}))),r.a.createElement("div",{className:"card_info"},r.a.createElement("div",{className:"select-box"},r.a.createElement("select",{onChange:this.changeWordLan,value:this.state.collection.word_lan.lan},this.state.language.map((function(e,t){return r.a.createElement("option",{key:t,value:e.lan},e.text)})))),r.a.createElement("div",{className:"select-box"},r.a.createElement("select",{onChange:this.changeDefinitionLan,value:this.state.collection.definition_lan.lan},this.state.language.map((function(e,t){return r.a.createElement("option",{key:t,value:e.lan},e.text)})))),this.state.collection.content.map((function(e,n){return r.a.createElement(je,{key:n,label:n,word:e.word,definition:e.definition,pictureName:e.pictureName,pictureURL:e.pictureURL,wordChange:t.wordChange,definitionChange:t.definitionChange,deleteCard:t.deleteCard,empty:e.empty,compressImg:t.compressImg,deleteImg:t.deleteImg})})),r.a.createElement("div",{className:"add_card",onClick:this.addNewCard},r.a.createElement("span",null," + 新增單詞卡"))),r.a.createElement("button",{onClick:this.submitCollection,style:{display:e?"block":"none"}},"建立"),r.a.createElement("button",{onClick:this.submitCollection,style:{display:e?"none":"block"}},"更新")):r.a.createElement(l.a,{to:"/"})}}])&&Ae(n.prototype,o),a&&Ae(n,a),t}(r.a.Component),Ue=Object(u.compose)(Object(s.b)((function(e,t){var n=t.match.params.id,o=e.firestore.data.collection;return{editCollection:o?o[n]:null,login:e.login.loginState,submitStatus:e.collection.submitStatus}}),(function(e){return{addNewCollection:function(t,n){e(function(e,t){return function(n,o,r){var a,i,c,l,s=r.getFirestore,u=new Date;a=u.getMonth()+1<10?"0".concat(u.getMonth()+1):u.getMonth()+1,i=u.getDate()<10?"0".concat(u.getDate()):u.getDate(),c=u.getHours()<10?"0".concat(u.getHours()):u.getHours(),l=u.getMinutes()<10?"0".concat(u.getMinutes()):u.getMinutes();for(var p=u.getFullYear()+"-"+a+"-"+i+" "+c+":"+l,d=e.content.slice(),h=0;h<d.length;h++)delete d[h].empty;s().collection("collection").add(C({},e,{timestamp:p,copyFrom:""})).then((function(){n({type:N,typeStr:t})})).catch((function(e){console.log(e),alert("發生問題請再試一次")}))}}(t,n))},updateCollection:function(t,n,o){e(I(t,n,o))},resetSubmitStatus:function(){e({type:D})}}})),Object(M.firestoreConnect)([{collection:"collection"}]))(Be);function Fe(e){return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Me(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function We(e){return(We=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ke(e,t){return(Ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ge=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=We(t).call(this,e))||"object"!==Fe(r)&&"function"!=typeof r?qe(o):r).state={showing:e.word,showing_lan:e.word_lan,open:"",pic_showing:!1,speakBackground:"0"},n.flipCard=n.flipCard.bind(qe(n)),n.speak=n.speak.bind(qe(n)),n.keyHandle=n.keyHandle.bind(qe(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ke(e,t)}(t,e),n=t,(o=[{key:"flipCard",value:function(){var e=this;this.state.showing===this.props.word?(this.setState({showing:this.props.definition,showing_lan:this.props.definition_lan}),""!==this.props.picture&&this.setState({pic_showing:!0})):this.setState({showing:this.props.word,showing_lan:this.props.word_lan,pic_showing:!1}),this.setState({open:"open"}),setTimeout((function(){e.setState({open:""}),e.speak()}),500)}},{key:"speak",value:function(){var e=this,t=window.speechSynthesis;if(!t.speaking){this.setState({speakBackground:"-35px"});var n=new SpeechSynthesisUtterance(this.state.showing);n.lang=this.state.showing_lan,t.speak(n),n.onend=function(){e.setState({speakBackground:"0"})}}}},{key:"keyHandle",value:function(e){"ArrowUp"===e.key?this.flipCard():"ArrowDown"===e.key&&this.speak()}},{key:"componentDidUpdate",value:function(e,t){this.props.word!==e.word&&this.setState({showing:this.props.word,showing_lan:this.props.word_lan,pic_showing:""}),this.state.showing!==t.showing&&this.speak()}},{key:"componentDidMount",value:function(){this.speak(),document.body.addEventListener("keyup",this.keyHandle)}},{key:"componentWillUnmount",value:function(){document.body.removeEventListener("keyup",this.keyHandle)}},{key:"render",value:function(){var e;return e=0===this.props.familiarity?"silver":this.props.familiarity<60?"rgb(252, 150, 150)":"rgb(143, 204, 143)",r.a.createElement("div",{className:"show_card ".concat(this.state.open," ").concat(this.props.nextAnimation)},r.a.createElement("div",{className:"card_flip_area",onClick:this.flipCard},r.a.createElement("div",{style:{display:this.state.pic_showing?"block":"none"},className:"img_wrap"},r.a.createElement("img",{src:this.props.picture})),r.a.createElement("p",{className:"text-align-center"},this.state.showing),r.a.createElement("div",{className:"paging"},this.props.currentIndex+1,"/",this.props.length),r.a.createElement("div",{className:"show_card_hover",style:{color:e,display:this.props.notSelf?"none":"block"}},r.a.createElement("span",null,"熟悉程度："),this.props.familiarity,"%")),r.a.createElement("div",{className:"card_feature"},r.a.createElement("div",{onClick:this.speak,className:"speak",style:{backgroundPositionX:this.state.speakBackground}})))}}])&&Me(n.prototype,o),a&&Me(n,a),t}(r.a.Component);function Qe(e){return(Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xe(n,!0).forEach((function(t){Ye(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ve(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ze(e){return(Ze=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $e(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function et(e,t){return(et=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var tt=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=Ze(t).call(this,e))||"object"!==Qe(r)&&"function"!=typeof r?$e(o):r).state={collection:null,currentIndex:0,nextAnimation:"",deleteCollectionState:!1,deleteConfirm:!1,mobile:!1,showHotKeyHint:!1},n.keyHandle=n.keyHandle.bind($e(n)),n.copyHandler=n.copyHandler.bind($e(n)),n.shuffleCards=n.shuffleCards.bind($e(n)),n.changeCard=n.changeCard.bind($e(n)),n.showKeyHint=n.showKeyHint.bind($e(n)),n.exchangeWordDef=n.exchangeWordDef.bind($e(n)),n.deleteConfirmHandler=n.deleteConfirmHandler.bind($e(n)),n.deleteCollection=n.deleteCollection.bind($e(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&et(e,t)}(t,e),n=t,(o=[{key:"keyHandle",value:function(e){"ArrowLeft"!==e.key&&"ArrowRight"!==e.key||this.changeCard(e)}},{key:"copyHandler",value:function(){var e=this.props.login,t=this.props.match.params.id;this.props.copyToSelfCollection(t,e)}},{key:"shuffleCards",value:function(){for(var e,t,n=this,o=this.state.collection.content.slice(),r=0;r<o.length;r++)t=Math.floor(Math.random()*o.length),e=o[r],o[r]=o[t],o[t]=e;this.setState({collection:Je({},this.state.collection,{content:o}),currentIndex:0,nextAnimation:"ease"}),setTimeout((function(){n.setState({nextAnimation:""})}),500)}},{key:"changeCard",value:function(e){var t=this,n=this.state.currentIndex;void 0===e.key?"前一個"===e.target.title?n-=1:n+=1:"ArrowLeft"===e.key?n-=1:"ArrowRight"===e.key&&(n+=1),n<this.props.collection.content.length&&n>=0&&(this.setState({currentIndex:n,nextAnimation:"ease"}),setTimeout((function(){t.setState({nextAnimation:""})}),500))}},{key:"showKeyHint",value:function(){this.setState((function(e){return{showHotKeyHint:!e.showHotKeyHint}}))}},{key:"exchangeWordDef",value:function(){for(var e,t=this,n=this.state.collection.content.slice(),o=0;o<n.length;o++)e=n[o].showWord,n[o].showWord=n[o].showDef,n[o].showDef=e;var r=this.state.collection.word_lan,a=r;r=this.state.collection.definition_lan,this.setState({collection:Je({},this.state.collection,{word_lan:r,definition_lan:a,content:n}),nextAnimation:"ease"}),setTimeout((function(){t.setState({nextAnimation:""})}),500)}},{key:"deleteConfirmHandler",value:function(e){"刪除"===e.target.textContent?this.setState({deleteConfirm:!0}):this.setState({deleteConfirm:!1})}},{key:"deleteCollection",value:function(){this.setState({deleteCollectionState:!0,deleteConfirm:!1});var e=this.props.match.params.id;this.props.deleteCollection(e)}},{key:"componentDidUpdate",value:function(e){if(this.props.collection!==e.collection){for(var t=this.props.collection.content.slice(),n=0;n<t.length;n++)t[n].showWord=t[n].word,t[n].showDef=t[n].definition;this.setState({collection:Je({},this.props.collection,{content:t})})}}},{key:"componentDidMount",value:function(){if(!!navigator.userAgent&&/(mobile)/i.test(navigator.userAgent)&&this.setState({mobile:!0}),document.body.addEventListener("keyup",this.keyHandle),null!==this.props.collection){for(var e=this.props.collection.content.slice(),t=0;t<e.length;t++)e[t].showWord=e[t].word,e[t].showDef=e[t].definition;this.setState({collection:Je({},this.props.collection,{content:e})})}}},{key:"componentWillUnmount",value:function(){document.body.removeEventListener("keyup",this.keyHandle)}},{key:"render",value:function(){var e,t,n=this,o=this.state.currentIndex,a=!1,i=!1,s=this.props.login.user_id;return null!==this.state.collection&&(e=[this.state.collection.content[o]],this.state.collection.user_id!==s&&(a=!0,t=r.a.createElement("div",{className:"feature_block",style:{display:a?"flex":"none"},onClick:this.copyHandler},r.a.createElement("div",{className:"add_to_learn block_img"}),r.a.createElement("div",null,"複製學習")),this.state.collection.public||(i=!0)),"anonymous"===s&&(t="")),this.state.deleteCollectionState||i||!this.props.login.login?r.a.createElement(l.a,{to:"/"}):r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"popup-overlay",style:{display:this.state.deleteConfirm?"flex":"none"}},r.a.createElement("div",{className:"deletecheck-popup"},"確定要刪除此字卡集嗎？",r.a.createElement("button",{className:"cancel",onClick:this.deleteConfirmHandler},"取消"),r.a.createElement("button",{className:"confirm",onClick:this.deleteCollection},"確定"),r.a.createElement("div",{className:"deletecheck-popup-background"}))),r.a.createElement("div",{className:"popup-overlay",style:{display:this.state.showHotKeyHint?"flex":"none"}},r.a.createElement("div",{className:"deletecheck-popup hot_key_popup"},r.a.createElement("div",{className:"key_description"},r.a.createElement("div",{className:"keyarrow"},"←"),"前一個"),r.a.createElement("div",{className:"key_description"},r.a.createElement("div",{className:"keyarrow"},"→"),"下一個"),r.a.createElement("div",{className:"key_description"},r.a.createElement("div",{className:"keyarrow"},"↑"),"翻字卡"),r.a.createElement("div",{className:"key_description"},r.a.createElement("div",{className:"keyarrow"},"↓"),"聽發音"),r.a.createElement("button",{className:"cancel",onClick:this.showKeyHint},"知道了"),r.a.createElement("div",{className:"deletecheck-popup-background"}))),r.a.createElement("div",{className:"wrap"},r.a.createElement("div",{className:"features"},r.a.createElement(c.b,{className:"feature_block",to:"/Test/"+this.props.match.params.id,style:{display:a?"none":"flex"}},r.a.createElement("div",{className:"card_test block_img"}),r.a.createElement("div",null,"字卡測驗")),t,r.a.createElement(c.b,{className:"feature_block",to:"/MatchGame/"+this.props.match.params.id},r.a.createElement("div",{className:"match_game block_img"}),r.a.createElement("div",null,"配對遊戲")),r.a.createElement(c.b,{className:"feature_block",onClick:this.shuffleCards},r.a.createElement("div",{className:"shuffle_card block_img"}),r.a.createElement("div",null,"隨機順序"))),r.a.createElement("div",{className:"cards_content"},r.a.createElement("div",{className:"edit-feature"},r.a.createElement("div",{className:"edit-feature_block",onClick:this.showKeyHint,style:{display:this.state.mobile?"none":"block"}},r.a.createElement("div",{className:"hot_key block_img",title:"快捷鍵說明"})),r.a.createElement("div",{className:"edit-feature_block",onClick:this.exchangeWordDef},r.a.createElement("div",{className:"exchange_cards block_img",title:"詞語定義交換"})),r.a.createElement(c.b,{className:"edit-feature_block",to:"/MakingCards/"+this.props.match.params.id,style:{display:a?"none":"block"}},r.a.createElement("div",{className:"edit_collection block_img",title:"編輯"})),r.a.createElement("div",{className:"edit-feature_block",onClick:this.deleteConfirmHandler,style:{display:a?"none":"block"}},r.a.createElement("div",{className:"delete_collection block_img",title:"刪除"},"刪除"))),this.state.collection&&e.map((function(e,t){return r.a.createElement(Ge,{key:t,currentIndex:o,word:e.showWord,definition:e.showDef,picture:e.pictureURL,familiarity:e.familiarity,word_lan:n.state.collection.word_lan.lan,definition_lan:n.state.collection.definition_lan.lan,nextAnimation:n.state.nextAnimation,length:n.props.collection.content.length,notSelf:a})})),r.a.createElement("div",{className:"arrows"},r.a.createElement("div",{className:"left-arrow",onClick:this.changeCard,title:"前一個"}),r.a.createElement("div",{className:"right-arrow",onClick:this.changeCard,title:"下一個"})))))}}])&&Ve(n.prototype,o),a&&Ve(n,a),t}(r.a.Component),nt=Object(u.compose)(Object(s.b)((function(e,t){var n=t.match.params.id,o=e.firestore.data.collection;return{collection:o?o[n]:null,login:e.login.loginState}}),(function(e){return{copyToSelfCollection:function(t,n){e(function(e,t){return function(n,o,r){var a=(0,r.getFirestore)();a.collection("collection").doc(e).get({}).then((function(o){var r,i,c,l,s=new Date;r=s.getMonth()+1<10?"0".concat(s.getMonth()+1):s.getMonth()+1,i=s.getDate()<10?"0".concat(s.getDate()):s.getDate(),c=s.getHours()<10?"0".concat(s.getHours()):s.getHours(),l=s.getMinutes()<10?"0".concat(s.getMinutes()):s.getMinutes();for(var u=s.getFullYear()+"-"+r+"-"+i+" "+c+":"+l,p=o.data(),d=p.content.slice(),h=0;h<d.length;h++)d[h].familiarity=0;p=C({},p,{content:d,copyFrom:e,user_id:t.user_id,user_photo:t.user_photo,author:t.user_name,timestamp:u}),a.collection("collection").add(C({},p)).then((function(){n({type:P}),window.location.hash="/"})).catch((function(e){console.log(e),alert("發生問題請再試一次")}))})).catch((function(e){console.log(e),alert("發生問題請再試一次")}))}}(t,n))},deleteCollection:function(t){e(function(e){return function(t,n,o){(0,o.getFirestore)().collection("collection").doc(e).delete().then((function(){t({type:z})})).catch((function(e){console.log(e),alert("發生問題請再試一次")}))}}(t))}}})),Object(M.firestoreConnect)([{collection:"collection"}]))(tt);function ot(e){return(ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function at(e){return(at=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function it(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ct(e,t){return(ct=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var lt=function(e){function t(e){var n,o,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(a=at(t).call(this,e))||"object"!==ot(a)&&"function"!=typeof a?it(o):a).textInput=r.a.createRef(),n.focusTextInput=n.focusTextInput.bind(it(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ct(e,t)}(t,e),n=t,(o=[{key:"focusTextInput",value:function(){this.textInput.current.focus()}},{key:"componentDidUpdate",value:function(e){e.count!==this.props.count&&this.focusTextInput()}},{key:"render",value:function(){return r.a.createElement("div",{style:{display:this.props.ouputDiasplay?"none":"block"}},r.a.createElement("h1",null,this.props.definition&&this.props.definition),r.a.createElement("form",{onSubmit:this.props.checkAnswer},r.a.createElement("input",{name:"answer",autoComplete:"off",ref:this.textInput,value:this.props.answer,onChange:this.props.changeAnswer})),r.a.createElement("p",{style:{color:"silver"}},"（按 Enter 送出答案）"))}}])&&rt(n.prototype,o),a&&rt(n,a),t}(r.a.Component);function st(e){return(st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ut(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function pt(e){return(pt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ht(e,t){return(ht=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ft=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=pt(t).call(this,e))||"object"!==st(r)&&"function"!=typeof r?dt(o):r).state={android:!1},n.keyHandle=n.keyHandle.bind(dt(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ht(e,t)}(t,e),n=t,(o=[{key:"keyHandle",value:function(e){32===e.keyCode&&this.props.nextQuestion()}},{key:"componentDidMount",value:function(){navigator.userAgent&&/(android)/i.test(navigator.userAgent)&&this.setState({android:!0})}},{key:"componentDidUpdate",value:function(e){this.props.ouputDiasplay!==e.ouputDiasplay&&(this.props.ouputDiasplay?document.body.addEventListener("keyup",this.keyHandle):document.body.removeEventListener("keyup",this.keyHandle))}},{key:"componentWillUnmount",value:function(){document.body.removeEventListener("keyup",this.keyHandle)}},{key:"render",value:function(){return r.a.createElement("div",{style:{display:this.props.ouputDiasplay?"block":"none"}},r.a.createElement("h1",{style:{color:this.props.outputColor}},this.props.output),r.a.createElement("p",{style:{fontSize:"20px",marginBottom:"5px"}},this.props.definition," / ",this.props.word),r.a.createElement("button",{onClick:this.props.nextQuestion},"點擊",r.a.createElement("span",{style:{display:this.state.android?"none":"inline"}}," / 空白鍵"),"繼續"))}}])&&ut(n.prototype,o),a&&ut(n,a),t}(r.a.Component);function gt(e){return(gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function bt(e){return(bt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vt(e,t){return(vt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var wt=function(e){function t(e){var n,o,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(a=bt(t).call(this,e))||"object"!==gt(a)&&"function"!=typeof a?yt(o):a).state={output:"",allNewRound:e.allNewRound,randomIndexArray:"",questionCount:"",answer:"",roundStart:!1,doneTest:e.doneTest},n.textInput=r.a.createRef(),n.focusTextInput=n.focusTextInput.bind(yt(n)),n.testStart=n.testStart.bind(yt(n)),n.changeAnswer=n.changeAnswer.bind(yt(n)),n.checkAnswer=n.checkAnswer.bind(yt(n)),n.nextQuestion=n.nextQuestion.bind(yt(n)),n.restartTest=n.restartTest.bind(yt(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vt(e,t)}(t,e),n=t,(o=[{key:"focusTextInput",value:function(){this.textInput.current.focus()}},{key:"testStart",value:function(){this.setState({allNewRound:!1});for(var e=[],t=0;t<this.props.collection.content.length;t++)e.push({index:t,familiarity:this.props.collection.content[t].familiarity});var n,o,r=[];if((e=e.filter((function(e){return e.familiarity<100}))).length>0)for(var a=0;a<e.length;a++)for(var i=(100-e[a].familiarity)/20,c=0;c<i;c++)r.push(e[a]);for(var l=0;l<r.length;l++)o=Math.floor(Math.random()*r.length),n=r[l],r[l]=r[o],r[o]=n;r.length>0&&this.setState({randomIndexArray:r,questionCount:0,roundStart:!0})}},{key:"changeAnswer",value:function(e){this.setState({answer:e.target.value})}},{key:"checkAnswer",value:function(e){var t=this.state.randomIndexArray[this.state.questionCount].index;e.preventDefault();var n=this.props.collection;new FormData(e.target).get("answer").toUpperCase()===n.content[t].word.toUpperCase()?(n.content[t].familiarity<100&&(n.content[t].familiarity=n.content[t].familiarity+20),this.setState({output:"答對了"})):(n.content[t].familiarity>0&&(n.content[t].familiarity=n.content[t].familiarity-20),this.setState({output:"答錯了"}));var o=this.props.match.params.id;this.props.updateCollection(n,o)}},{key:"nextQuestion",value:function(){var e;e=this.state.randomIndexArray.length<5?this.state.randomIndexArray.length-1:4,this.state.questionCount<e?this.setState((function(e){return{questionCount:e.questionCount+1,answer:"",output:""}})):this.setState({roundStart:!1,answer:"",output:""})}},{key:"restartTest",value:function(){for(var e=this.props.collection,t=0;t<e.content.length;t++)e.content[t].familiarity=0;this.setState({doneTest:!1});var n=this.props.match.params.id;this.props.updateCollection(e,n)}},{key:"componentDidUpdate",value:function(e){this.props!==e&&null!==this.props.collection&&this.props.collection.content.filter((function(e){return 100===e.familiarity})).length===this.props.collection.content.length&&this.setState({doneTest:!0})}},{key:"render",value:function(){var e,t,n;""!==this.state.randomIndexArray&&void 0!==this.state.randomIndexArray[this.state.questionCount]&&(e=this.state.randomIndexArray[this.state.questionCount].index,t=this.props.collection.content[e].definition,n=this.props.collection.content[e].word);var o,a=!1;""!==this.state.output&&(a=!0),o="答錯了"===this.state.output?"red":"green";var i=0,s=!1,u=this.props.login.user_id;if(null!==this.props.collection){for(var p=0;p<this.props.collection.content.length;p++)i+=this.props.collection.content[p].familiarity;i=Math.floor(i/this.props.collection.content.length),this.props.collection.user_id!==u&&(s=!0)}return s||!this.props.login.login?r.a.createElement(l.a,{to:"/"}):r.a.createElement("div",{className:"content"},r.a.createElement(c.b,{className:"back_to_collection",to:"/Collection/"+this.props.match.params.id}),r.a.createElement("div",{className:"test_area"},r.a.createElement("div",{className:"test_guide",style:{display:this.state.allNewRound?"block":"none"}},r.a.createElement("h1",null,"測驗說明"),r.a.createElement("p",null,"每次測驗將隨機出現 1-5 題"),r.a.createElement("p",null,"每答對一題熟悉程度",r.a.createElement("span",{style:{color:"green"}}," +20%")),r.a.createElement("p",null,"每答錯一題熟悉程度",r.a.createElement("span",{style:{color:"red"}},"  -20%")),r.a.createElement("button",{onClick:this.testStart},"開始測驗")),r.a.createElement("div",{className:"continue_test",style:{display:this.state.allNewRound?"none":"block"}},r.a.createElement("div",{style:{display:this.state.roundStart?"none":"block"}},r.a.createElement("h1",null,"目前進度"),r.a.createElement("p",{className:"familiarity_description"},"熟悉程度平均"),r.a.createElement("p",{className:"average_percent"},i,"%"),r.a.createElement("button",{onClick:this.testStart,style:{display:this.state.doneTest?"none":"block"}},"繼續測驗"),r.a.createElement("p",{style:{display:this.state.doneTest?"block":"none"}},"恭喜！已熟悉所有字卡"),r.a.createElement("button",{onClick:this.restartTest,style:{display:this.state.doneTest?"block":"none"}},"重置測驗"))),r.a.createElement("div",{className:"test",style:{display:this.state.roundStart?"block":"none"}},r.a.createElement(lt,{ouputDiasplay:a,count:this.state.questionCount,definition:t,changeAnswer:this.changeAnswer,answer:this.state.answer,checkAnswer:this.checkAnswer}),r.a.createElement(ft,{ouputDiasplay:a,outputColor:o,output:this.state.output,nextQuestion:this.nextQuestion,definition:t,word:n}))))}}])&&mt(n.prototype,o),a&&mt(n,a),t}(r.a.Component),xt=Object(u.compose)(Object(s.b)((function(e,t){var n=t.match.params.id,o=e.firestore.data.collection,r=o?o[n]:null,a=!1,i=!1;if(null!==r){var c=r.content.filter((function(e){return 0===e.familiarity}));c.length===r.content.length&&(a=!0),(c=r.content.filter((function(e){return 100===e.familiarity}))).length===r.content.length&&(i=!0)}return{collection:r,allNewRound:a,doneTest:i,login:e.login.loginState}}),(function(e){return{updateCollection:function(t,n){e(I(t,n))}}})),Object(M.firestoreConnect)([{collection:"collection"}]))(wt);var kt=function(e){return r.a.createElement("div",{className:"game_card ".concat(e.border),onClick:e.pickCard.bind(this,e)},r.a.createElement("div",{className:"show_word"},e.show))};function _t(e){return(_t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Et(n,!0).forEach((function(t){St(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Et(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function St(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ct(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function jt(e){return(jt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pt(e,t){return(Pt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Tt=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=jt(t).call(this,e))||"object"!==_t(r)&&"function"!=typeof r?Nt(o):r).state={cardsArray:"",count:0,roundOver:"",roundOverTime:"",gameTime:""},n.gameStart=n.gameStart.bind(Nt(n)),n.startTimer=n.startTimer.bind(Nt(n)),n.pickCard=n.pickCard.bind(Nt(n)),n.checkAnswer=n.checkAnswer.bind(Nt(n)),n.nonActiveBorder=n.nonActiveBorder.bind(Nt(n)),n.checkRoundOver=n.checkRoundOver.bind(Nt(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pt(e,t)}(t,e),n=t,(o=[{key:"gameStart",value:function(e){var t=e.slice(),n=[];if(null!==t){var o,r,a=[];if(t.length<4)for(var i=0;i<t.length;i++)for(var c=0;c<2;c++)a.push(t[i]);else a=t;for(var l=0;l<a.length;l++)r=Math.floor(Math.random()*a.length),o=a[l],a[l]=a[r],a[r]=o;a.splice(4,a.length-4);for(var s=0;s<a.length;s++)for(var u=0;u<2;u++)n.push(a[s]);for(var p=0;p<8;p++)n[p]=Ot({},n[p],p%2==0?{show:n[p].word}:{show:n[p].definition});for(var d=0;d<n.length;d++)r=Math.floor(Math.random()*n.length),o=n[d],n[d]=n[r],n[r]=o;for(var h=0;h<8;h++)n[h]=Ot({},n[h],{label:h})}this.setState({cardsArray:n,roundOver:!1,gameTime:"00:00"}),this.startTimer(0,1)}},{key:"startTimer",value:function(e,t){var n,o=this,r=setInterval((function(){e<10&&t<10?n="0".concat(e,":0").concat(t):e<10?n="0".concat(e,":").concat(t):t<10&&(n="".concat(e,":0").concat(t)),60==++t&&(e++,t=0),o.setState({gameTime:n}),o.state.roundOver&&clearInterval(r)}),1e3)}},{key:"pickCard",value:function(e){var t=this.state.cardsArray.slice(),n=this.state.count;void 0===t[e.label].border&&this.state.count<2&&(t[e.label]=Ot({},t[e.label],{border:"active"}),this.setState({cardsArray:t}),this.setState((function(e){return{count:e.count+1}})),n++),2===n&&this.checkAnswer(t)}},{key:"checkAnswer",value:function(e){var t=this,n=e.filter((function(e){return void 0!==e.border}));(n=n.filter((function(e){return"correct"!==e.border})))[0].word===n[1].word?(e[n[0].label].border="correct",e[n[1].label].border="correct",this.setState({count:0}),setTimeout((function(){t.checkRoundOver()}),800)):(e[n[0].label].border="wrong",e[n[1].label].border="wrong",setTimeout((function(){t.nonActiveBorder()}),1e3))}},{key:"nonActiveBorder",value:function(){var e=this.state.cardsArray.slice(),t=e.filter((function(e){return"wrong"===e.border}));delete e[t[0].label].border,delete e[t[1].label].border,this.setState({cardsArray:e,count:0})}},{key:"checkRoundOver",value:function(){8===this.state.cardsArray.filter((function(e){return"correct"===e.border})).length&&this.setState({roundOver:!0,roundOverTime:this.state.gameTime})}},{key:"componentDidMount",value:function(){null!==this.props.collection&&this.gameStart(this.props.collection)}},{key:"componentDidUpdate",value:function(e){this.props.collection!==e.collection&&this.gameStart(this.props.collection)}},{key:"render",value:function(){var e=this;return this.props.login.login?r.a.createElement("div",{className:"content game_area"},r.a.createElement(c.b,{className:"back_to_collection",to:"/Collection/"+this.props.match.params.id}),r.a.createElement("h2",{className:"game_time",style:{display:this.state.roundOver?"none":"block"}},this.state.gameTime),this.state.cardsArray&&this.state.cardsArray.map((function(t,n){return r.a.createElement(kt,{key:n,label:t.label,show:t.show,word:t.word,pickCard:e.pickCard,border:t.border})})),r.a.createElement("div",{className:"popup-overlay",style:{display:this.state.roundOver?"flex":"none"}},r.a.createElement("div",{className:"deletecheck-popup"},"你花了",this.state.roundOverTime,"完成遊戲！",r.a.createElement("button",{className:"cancel",onClick:this.gameStart.bind(this,this.props.collection)},"再玩一次"),r.a.createElement(c.b,{className:"cancel",to:"/Collection/"+this.props.match.params.id},"繼續背誦"),r.a.createElement("div",{className:"deletecheck-popup-background"})))):r.a.createElement(l.a,{to:"/"})}}])&&Ct(n.prototype,o),a&&Ct(n,a),t}(r.a.Component),It=Object(u.compose)(Object(s.b)((function(e,t){var n=t.match.params.id,o=e.firestore.data.collection;return{collection:o?o[n].content:null,login:e.login.loginState}})),Object(M.firestoreConnect)([{collection:"collection"}]))(Tt);function Dt(e){return(Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function At(e,t){return!t||"object"!==Dt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Rt(e){return(Rt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ht(e,t){return(Ht=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Lt=Object(u.createStore)(W,Object(p.composeWithDevTools)(Object(u.applyMiddleware)(d.a.withExtraArgument({getFirebase:M.getFirebase,getFirestore:F.getFirestore})),Object(F.reduxFirestore)(K.a),Object(M.reactReduxFirebase)(K.a,{attachAuthIsReady:!0}))),Bt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),At(this,Rt(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ht(e,t)}(t,e),n=t,(o=[{key:"render",value:function(){return r.a.createElement(s.a,{store:Lt},r.a.createElement(c.a,null,r.a.createElement($,null),r.a.createElement(ce,null),r.a.createElement(ee,null),r.a.createElement(l.b,{path:"/",exact:!0,component:ge}),r.a.createElement(l.b,{path:"/Search/:keyword",exact:!0,component:ke}),r.a.createElement(l.b,{path:"/Collection/:id",exact:!0,component:nt}),r.a.createElement(l.b,{path:"/MakingCards/:id",exact:!0,component:Ue}),r.a.createElement(l.b,{path:"/Test/:id",exact:!0,component:xt}),r.a.createElement(l.b,{path:"/MatchGame/:id",exact:!0,component:It})))}}])&&zt(n.prototype,o),a&&zt(n,a),t}(r.a.Component);Lt.firebaseAuthIsReady.then((function(){i.a.render(r.a.createElement(Bt,null),document.getElementById("root"))}))}});