!function(e){function n(n){for(var o,a,c=n[0],l=n[1],s=n[2],p=0,d=[];p<c.length;p++)a=c[p],r[a]&&d.push(r[a][0]),r[a]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);for(u&&u(n);d.length;)d.shift()();return i.push.apply(i,s||[]),t()}function t(){for(var e,n=0;n<i.length;n++){for(var t=i[n],o=!0,c=1;c<t.length;c++){var l=t[c];0!==r[l]&&(o=!1)}o&&(i.splice(n--,1),e=a(a.s=t[0]))}return e}var o={},r={0:0},i=[];function a(n){if(o[n])return o[n].exports;var t=o[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,a),t.l=!0,t.exports}a.m=e,a.c=o,a.d=function(e,n,t){a.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,n){if(1&n&&(e=a(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(a.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)a.d(t,o,function(n){return e[n]}.bind(null,o));return t},a.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(n,"a",n),n},a.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},a.p="";var c=window.webpackJsonp=window.webpackJsonp||[],l=c.push.bind(c);c.push=n,c=c.slice();for(var s=0;s<c.length;s++)n(c[s]);var u=l;i.push([268,1]),t()}({261:function(e,n){},268:function(e,n,t){t(552),e.exports=t(542)},540:function(e,n){},541:function(e,n){},542:function(e,n,t){var o=t(543);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};t(550)(o,r);o.locals&&(e.exports=o.locals)},543:function(e,n,t){(n=e.exports=t(44)(!1)).i(t(544),""),n.i(t(545),""),n.i(t(546),""),n.i(t(547),""),n.i(t(548),""),n.i(t(549),""),n.push([e.i,"/* ----------- Header ---------- */\nheader {\n    width: 100%;\n    height: 55px;\n    background-color: #7BCEFF;\n    box-shadow: 0 5px 5px #dbdbdb;\n    z-index: 10;\n    position: fixed;\n    top: 0;\n}\n\n.container, .search_bar, .add_card {\n    height: 100%;\n    display: flex;\n    flex-flow: row;\n    align-items: center;\n}\n\nheader > .container {\n    width: 98%;\n    margin: 0 auto;\n}\n\nheader > .container *{\n    padding: 0 5px;\n}\n\nheader > .container p {\n    color: white;\n    font-size: 18px;\n    font-weight: 700;\n    padding: 0;\n    min-width: 80px;\n}\n\nheader > .container > img {\n    height: 45px;\n    padding: 0 10px;\n    cursor: pointer;\n}\n\nheader > .container .icon {\n    height: 40px;\n    cursor: pointer;\n}\n\n\nheader .logo {\n    height: 40px;\n}\n\nheader > .container > .member {\n    height: 35px;\n    width: 35px;\n    background-size: cover;\n    margin: 0 5px 0 0;\n    border-radius: 50%;\n}\n\nheader > .container > .log_out {\n    color: white;\n    cursor: pointer;\n}\n\nheader > .container > .log_out:hover {\n    color: #FFE20E;\n    font-weight: 700;\n}\n\nheader > .container > .add_card {\n    margin-right: auto;\n    cursor: pointer;\n}\n\nheader > .container > .search_bar {\n    background-color: white;\n    height: 60%;\n    border-radius: 50px;\n    padding: 0;\n    padding-left: 10px;\n    margin-right: 15px;\n}\n\nheader > .container > .search_bar *{\n    padding: 0 3px;\n}\n\nheader > .container > .search_bar > input {\n    font-size: 16px;\n    max-width: 171px;\n}\n\nheader > .container > .search_bar_mobile {\n    display: none;\n}\n\n/* ----------- Header Mobile ---------- */\n@media screen and (max-width: 650px) {\n    header > .container {\n        width: 100%;\n    }\n\n    header > .container *{\n        padding: 0 5px;\n    }\n\n    header > .container img {\n        height: 40px;\n    }\n\n    header .logo {\n        margin-left: 5px;\n    }\n\n    header > .container > .member {\n        margin: 0 15px 0 0;\n    }\n\n    header > .container > .log_out {\n        margin-left: 0;\n    }\n\n    header > .container > .add_card > p{\n        display: none;\n    }\n\n    header > .container > .search_bar {\n        display: none;\n    }\n\n    header > .container > .search_bar_mobile {\n        display: flex;\n    }\n\n    header > .container > .search_bar_mobile > .search_bar_mobile_input {\n        z-index: 10;\n        position: fixed;\n        top: 55px;\n        left: 0;\n        width: 100vw;\n        height: 55px;\n        background-color: white;\n        box-shadow: 0 5px 5px #dbdbdb;\n        flex-flow: row;\n        align-items: center;\n        justify-content: center;\n        display: flex;\n    }\n\n    .search_bar_mobile_input > input {\n        border-bottom: 2px solid rgb(181, 228, 255);\n        font-size: 16px;\n        padding: 5px;\n        width: calc(95vw - 50px);\n        border-radius: 0;\n    }\n\n}\n\n/* ----------- Background ---------- */\n.background {\n    width: 100%;\n    height: 160px;\n    position: absolute;\n    bottom: 0;\n    overflow: hidden;\n    z-index: -1;\n}\n\n.background > .background_triangle {\n    width: 0;\n    height: 0;\n    border-style: solid;\n    border-width: 80px 0 80px 100vw;\n    border-color: transparent transparent transparent rgb(231, 247, 255);\n}\n\n.background > .background_square {\n    height: 80px;\n    width: 100vw;\n    background-color: rgb(231, 247, 255);\n    position: absolute;\n    bottom: 0;\n}\n\n/* ---------- LoginPopup ----------- */\n.popup-overlay {\n    background: rgba(0, 0, 0,0.5);\n    display: flex;\n    position: fixed;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    top: 0;\n    z-Index: 999;\n}\n\n.popup-content {\n    background: rgb(255, 255, 255);\n    border-radius: 10px;\n    margin: auto;\n    position: relative;\n    width: 290px;\n    color: white;\n}\n\n.modal {\n    font-size: 12px;\n}\n\n.modal > .header {\n    width: 100%;\n    height: 200px;\n    background-color: #7BCEFF;\n    font-size: 18px;\n    text-align: center;\n    padding: 5px;\n    border-radius: 10px 10px 0 0;\n}\n\n.modal > .header > img {\n    height: 70%;\n    width: 100%;\n    transform: rotate(-8deg);\n    padding-bottom: 10px;\n}\n  \n.modal > .content {\n    width: 100%;\n    padding: 10px 5px;\n}\n  \n.modal > .actions {\n    width: 100%;\n    padding: 10px 5px;\n    margin: auto;\n    text-align: center;\n}\n\n.modal > .actions > button {\n    width: 90%;\n    height: 40px;\n    margin: 5% auto;\n    font-size: 15px;\n    font-weight: bolder;\n    display: flex;\n    align-items: center;\n    justify-content: baseline;\n    flex-flow: row;\n    color: white;\n    border: none;\n    border-radius: 5px;\n}\n\n.modal > .actions > button:first-child {\n    background-color: #254ea6;\n}\n\n.modal > .actions > button:nth-child(2) {\n    background-color: #d84134;\n}\n\n.modal > .actions > button:nth-child(3) {\n    background-color: #686868;\n}\n\n.modal > .actions > button > img {\n    height: 100%;\n    width: 27%;\n}\n",""])},544:function(e,n,t){(n=e.exports=t(44)(!1)).push([e.i,"@import url(https://fonts.googleapis.com/css?family=Noto+Sans+TC);",""]),n.push([e.i,"/* ---------- Basic Setting ------------ */\n* {\n    box-sizing: border-box;\n    font-family: 'Noto Sans TC', sans-serif;\n}\n\nhtml,\nbody,\nheader,\nfooter,\nsection,\nh1,\nh2,\nh3,\nh4,\nh5,\nh6,\na,\np,\nul,\nli,\naside,\nnav,\nimg {\n    margin: 0;\n    padding: 0;\n}\n\na {\n    text-decoration: none;\n    cursor: pointer;\n}\n\nbutton {\n    outline: none;\n    cursor: pointer;\n}\n\ninput {\n    outline: none;\n    border: none;\n    border-radius: 0;\n}\n\ninput::placeholder {\n    color: rgb(230, 230, 230);\n    font-weight: 300;\n}\n\n#root {\n    position: relative;\n    height: 100%;\n    width: 100%;\n    min-height: calc(100vh - 85px);\n}\n\n.content {\n    width: 90%;\n    max-width: 1000px;\n    margin: 85px auto 30px auto;\n    display: flex;\n    flex-flow: row wrap;\n}\n\n/* ---------- input通用css設定 ---------- */\n.content input {\n    font-weight: 300;\n    margin: 10px 0;\n    padding: 10px 0;\n    color: #333333;\n    border-bottom: 2px solid #979797;\n}\n\n\n.content input::placeholder {\n    color: silver;\n    font-weight: 300;\n}\n\n.content input:focus {\n    border-bottom: 3px solid #FFE20E;\n}\n\n/* ---------- select通用css設定 ---------- */\n.select-box {\n    position: relative;\n    border: 2px solid rgb(235, 235, 235);\n    background-color: white;\n}\n\nselect {\n    -webkit-appearance: none;\n    -moz-appearance: none;\n    appearance: none;\n    color: rgb(1, 192, 192);\n    padding: 10px;\n    padding-right: 30px;\n    outline: none;\n    border: none;\n    background-color: white;\n    font-size: 13px;\n}\n\n.arrow {\n    padding: 2px;\n    width: 30px;\n    height: 100%;\n    position: absolute;\n    right: 0;\n    top: 0;\n}\n\n/* 取消手機點擊hilight效果 */\ndiv {\n    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n}",""])},545:function(e,n,t){(e.exports=t(44)(!1)).push([e.i,".collection_info {\n    width: 100%;\n    display: flex;\n    align-items: baseline;\n    margin-bottom: 20px;\n}\n\n.collection_info > input {\n    width: 80%;\n    font-size: 25px;\n}\n\n.collection_info select {\n    width: 99%;\n    font-size: 14px;\n    background-image: url(/image/arrow.svg);\n    background-repeat: no-repeat;\n    background-position: right;\n    background-size: 25px;\n}\n\n.collection_info > .select-box {\n    margin-left: auto;\n    width: 18%;\n}\n\n.content > .add-from-file {\n    width: 100%;\n    margin: -10px 0 20px 0;\n    color: #5F5F5F;\n}\n\n.content > .add-from-file > label {\n    cursor: pointer;\n}\n\n.content > .add-from-file > label:hover {\n    color: rgb(1, 192, 192);\n}\n\n.content > .card_info {\n    width: 100%;\n    display: flex;\n    flex-flow: row wrap;\n    align-items: center;\n    justify-content: space-between;\n}\n\n.content > .card_info .select-box {\n    width: 48%;\n    margin: 0 0 20px 0;\n}\n\n.content > .card_info .select-box select {\n    width: 99%;\n    font-size: 14px;\n    background-image: url(/image/arrow.svg);\n    background-repeat: no-repeat;\n    background-position: right;\n    background-size: 25px;\n}\n\n.making_card {\n    width: 100%;\n    padding: 20px 0;\n    background-color: white;\n    box-shadow: 5px 5px 5px #dbdbdb;\n    border: 1px solid #dbdbdb;\n    display: flex;\n    flex-flow: row;\n    align-items: center;\n    justify-content: space-around;\n    margin-bottom: 20px;\n}\n\n.making_card > input {\n    font-size: 18px;\n    font-weight: 300;\n    width: 40%;\n    margin: 0 10px 0 10px;\n}\n\n.making_card > .definition {\n    font-size: 15px;\n}\n\n.making_card .delete_card,\n.making_card .add_image {\n    width: 40px;\n    height: 40px;\n    cursor: pointer;\n}\n\n.making_card .loading_image {\n    width: 38px;\n    height: 38px;\n    background-image: url(/image/loading.gif);\n    background-size: cover;\n}\n\n.making_card .preview_image {\n    width: 24px;\n    height: 24px;\n    margin: 8px;\n    cursor: pointer;\n    background-size: cover;\n    background-repeat: no-repeat;\n    background-position: center;\n}\n\n.making_card .add_image {\n    background: url('/image/make_card_sprite.svg');\n    background-position: 0 0;\n    background-size: 80px 120px;\n}\n\n.making_card .add_image:hover {\n    background-position:  -40px 0;\n    background-size: 80px 120px;\n}\n\n.making_card .delete_card {\n    background: url('/image/make_card_sprite.svg');\n    background-position: 0 -40px;\n    background-size: 80px 120px;\n}\n\n.making_card .delete_card:hover {\n    background-position: -40px -40px;\n    background-size: 80px 120px;\n}\n\n.content > .card_info .add_card {\n    background-color: white;\n    box-shadow: 5px 5px 5px #dbdbdb;\n    border: 1px dashed #dbdbdb;\n    width: 100%;\n    height: 86px;\n    margin-bottom: 20px;\n    text-align: center;\n    cursor: pointer;\n}\n\n.content > .card_info .add_card > span {\n    margin: 0 auto;\n    color: #797979;\n    line-height: 30px;\n    border-bottom: 2px solid rgb(1, 192, 192);\n}\n\n.content > .card_info .add_card:hover > span {\n    border-bottom: 2px solid #FFE20E;\n}\n\n.content button {\n    background-color:  rgb(1, 192, 192);\n    color: white;\n    width: 100%;\n    max-width: 180px;\n    height: 40px;\n    border: none;\n    font-size: 15px;\n    font-weight: 700;\n    margin-top: 10px;\n    margin-left: auto;\n}\n\n@media screen and (max-width: 650px) {\n    .content > .add-from-file {\n        display: none;\n    }\n\n    .collection_info > input {\n        width: 100%;\n    }\n    \n    .collection_info > .select-box {\n        width: 100%;\n    }\n\n    .content button {\n        max-width: 100%;\n    }\n\n    .collection_info {\n        flex-flow: column;\n        margin-bottom: 20px;\n    }\n\n    .making_card {\n        flex-flow: row wrap;\n        justify-content: flex-end;\n    }\n\n    .making_card img {\n        height: 35px;\n        margin-right: 1%;\n    }\n\n    .making_card > input {\n        width: 46%;\n        margin: 2%;\n    }\n}",""])},546:function(e,n,t){(e.exports=t(44)(!1)).push([e.i,".collection {\n    width: 30%;\n    min-height: 163px;\n    padding: 10px 20px;\n    margin: 0 1.6666%;\n    margin-bottom: 30px;\n    background-color: white;\n    box-shadow: 5px 5px 5px #dbdbdb;\n    outline: 1px solid #dbdbdb;\n    border-bottom: 2px solid white;\n    color: #333333;\n    cursor: pointer;\n    position: relative;\n}\n\n.first_time_hint {\n    width: 100%;\n    display: flex;\n    flex-flow: row wrap;\n}\n\n.first_time_hint h3 {\n    width: 100%;\n    margin: 0 2% 20px 2%;\n    color: rgb(1, 192, 192);\n    font-size: 18px;\n    text-align: center;\n    font-weight: 300;\n    border-bottom: 3px solid #FFE20E;\n    padding-bottom: 5px;\n}\n\n.first_time_hint .collection {\n    border: 1px dashed #dbdbdb;\n    display: flex;\n    flex-flow: row wrap;\n    align-items: center;\n    outline: none;\n}\n\n.first_time_hint .collection .wrap_new {\n    width: 100%;\n    display: flex;\n    flex-flow: row wrap;\n    align-items: center;\n}\n\n.first_time_hint .collection p{\n    text-align: center;\n    width: 100%;\n    margin-top: 5px;\n}\n\n.first_time_hint .collection .search_lan{\n    display: block;\n    width: 30%;\n    padding-bottom: 30%;\n    margin: 0 auto;\n}\n\n.collection:hover {\n    border-bottom: 3px solid #FF6D14;\n}\n\n.collection > h2 {\n    color: rgb(1, 192, 192);\n    border-bottom: 3px solid #FFE20E;\n    font-weight: 700;\n    margin-bottom: 10px;\n}\n\n.collection .new_card {\n    background-image: url('/image/new_card_sprite.svg');\n    background-size: 200%;\n    background-position: 0 0;\n}\n\n.collection:hover .new_card {\n    background-position: -100% 0;\n}\n\n.collection .recent_card {\n    background-image: url('/image/new_card_sprite.svg');\n    background-size: 200%;\n    background-position: 0 -100%;\n}\n\n.collection:hover .recent_card {\n    background-position: -100% -100%;\n}\n\n.collection .english {\n    background-image: url('/image/lan_sprite.svg');\n    background-size: 200% 300%;\n    background-position: 0 0;\n}\n\n.collection .english:hover {\n    background-position: -100% 0;\n}\n\n.collection .japanese {\n    background-image: url('/image/lan_sprite.svg');\n    background-size: 200% 300%;\n    background-position: 0 -100%;\n}\n\n.collection .japanese:hover {\n    background-position: -100% -100%;\n}\n\n.collection .korean {\n    background-image: url('/image/lan_sprite.svg');\n    background-size: 200% 300%;\n    background-position: 0 -200%;\n}\n\n.collection .korean:hover {\n    background-position: -100% -200%;\n}\n\n.collection .creator_grid {\n    display: grid;\n    grid-template-columns: 1fr 40px;\n    grid-template-rows: 32px;\n    margin: 15px 0 5px 0;\n    align-items: center;\n}\n\n.collection .creator_grid p {\n    font-size: 12px;\n    color: #979797;\n    text-align: right;\n}\n\n.collection .creator_grid img {\n    width: 32px;\n    height: 32px;\n    border-radius: 50%;\n    margin-left: auto;\n}\n\n.collection > .words_number {\n    font-size: 14px;\n    color: #979797;\n    text-align: left;\n}\n\n.collection .not_open {\n    width: 20px;\n    height: 20px;\n    background-image: url('/image/lock.svg');\n    background-size: cover;\n    position: absolute;\n    left: 20px;\n    bottom: 20px;\n}\n\n.search_none {\n    margin: 30px auto;\n    text-align: center;\n    color: #979797;\n    line-height: 50px;\n    font-weight: 300;\n}\n\n.white-overlay {\n    display: flex;\n    position: fixed;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    top: 0;\n}\n\n.white-overlay .loading {\n    width: 60px;\n    height: 60px;\n    margin: auto;\n}\n\n.page_location {\n    width: 100%;\n    margin: 0 2% 20px 2%;\n    color: rgb(211, 211, 211);\n    display: flex;\n    flex-flow: row;\n    align-items: center;\n}\n\n.page_location span {\n    font-size: 14px;\n}\n\n.page_location div {\n    cursor: pointer;\n}\n\n.page_location div:first-child {\n    margin-right: 10px;\n}\n\n.page_location div:last-child {\n    margin-left: 10px;\n}\n\n.page_active {\n    color: #979797;\n}\n\n@media screen and (max-width: 800px) {\n    .collection {\n        width: 45%;\n    }\n}\n\n@media screen and (max-width: 650px) {\n    .collection {\n        width: 100%;\n    }\n}",""])},547:function(e,n,t){(e.exports=t(44)(!1)).push([e.i,".content .arrows {\n    width: 100%;\n    display: flex;\n    margin: 20px 0;\n    justify-content: center;\n}\n\n@media screen and (max-width: 700px) {\n    .content .arrows {\n        margin: 10px 0;\n    }\n}\n\n.left-arrow {\n    background: url('/image/arrow_sprite.svg');\n    background-position: 0 0;\n    background-size: 80px;\n}\n\n.left-arrow:hover {\n    background-position: -40px 0;\n    background-size: 80px;\n    background-color: white;\n}\n\n.right-arrow {\n    background: url('/image/arrow_sprite.svg');\n    background-position: 0 -40px;\n    background-size: 80px;\n}\n\n.right-arrow:hover {\n    background-position: -40px -40px;\n    background-size: 80px;\n    background-color: white;\n}\n\n.left-arrow, .right-arrow {\n    border: 1px solid silver;\n    border-radius: 50%;\n    background-color: white;\n    cursor: pointer;\n    height: 40px;\n    width: 40px;\n    margin: 0 30px;\n}\n\n.content .cards_content {\n    overflow: hidden;\n    width: 70%;\n    margin: 0 auto;\n    position: relative;\n}\n\n@media screen and (max-width: 1000px){\n    .content .cards_content {\n        width: 80%;\n    }\n}\n\n@media screen and (max-width: 880px){\n    .content .cards_content {\n        width: 85%;\n    }\n}\n\n@media screen and (max-width: 830px){\n    .content .cards_content {\n        width: 100%;\n    }\n}\n\n.content .paging {\n    font-size: 18px;\n    color: silver;\n    position: absolute;\n    text-align: right;\n    top: 5px;\n    left: 10px;\n}\n\n.content .show_card {\n    border: 1px solid silver;\n    width: 100%;\n    max-width: 500px;\n    height: 350px;\n    display: flex;\n    flex-flow: column;\n    justify-content: center;\n    align-items: center;\n    background-color: white;\n    cursor: pointer;\n    position: relative;\n    margin:auto;\n    padding: 10px;\n}\n\n.text-align-center {\n    text-align: center;\n}\n\n.deletecheck-popup {\n    background: rgb(255, 255, 255);\n    border-radius: 10px;\n    margin: auto;\n    position: relative;\n    width: 290px;\n    height: 150px;\n    color: #333333;\n    display: flex;\n    flex-flow: row wrap;\n    justify-content: center;\n    align-items: center;\n    padding: 10px 20px;\n    font-size: 18px;\n    box-shadow: 0 0 10px;\n    overflow: hidden;\n    text-align: center;\n}\n\n.deletecheck-popup .cancel, .deletecheck-popup .confirm{\n    width: 30%;\n    margin: 10px 10% 0 10%;\n    padding: 3px;\n    background-color: white;\n    border-radius: 3px;\n    border: none;\n    font-size: 15px;\n    color: white;\n    z-index: 5;\n    text-align: center;\n    height: 34px;\n    line-height: 28px;\n    font-weight: 700;\n}\n\n.deletecheck-popup > .cancel {\n    background-color: rgb(1, 192, 192);\n}\n\n.deletecheck-popup > .confirm {\n    background-color: #E02D2D;\n}\n\n.deletecheck-popup-background {\n    width: 0;\n    height: 0;\n    border-style: solid;\n    border-width: 90px 0 0 100vw;\n    border-color: transparent transparent transparent rgb(231, 247, 255);\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    z-index: 2;\n}\n\n.wrap {\n    width: 100%;\n    position: relative;\n    margin: 50px 0 0 50px;\n}\n\n.features {\n    margin: 0 auto;\n    display: flex;\n    flex-flow: column;\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n\n.content .feature_block {\n    width: 100px;\n    height: 100px;\n    border-bottom: 3px solid rgb(1, 192, 192);\n    box-shadow: 0 0 5px silver;\n    margin-bottom: 20px;\n    cursor: pointer;\n    display: flex;\n    flex-flow: column;\n    align-items: center;\n    color: #5f5f5f;\n    background-color: white;\n}\n\n.content .feature_block:hover {\n    border-bottom: 5px solid #FFE20E;\n}\n\n.feature_block .block_img {\n    width: 65px;\n    height: 65px;\n    background-size: cover;\n    font-size: 0;\n}\n\n.feature_block .card_test {\n    background: url('/image/feature_sprite.svg');\n    background-position: 0 0;\n    background-size: 130px 260px;\n}\n\n.feature_block:hover .card_test {\n    background-position: -65px 0; \n    background-size: 130px 260px;\n}\n\n.feature_block .match_game {\n    background: url('/image/feature_sprite.svg');\n    background-position: 0 -65px;\n    background-size: 130px 260px;\n}\n\n.feature_block:hover .match_game {\n    background-position: -65px -65px;\n    background-size: 130px 260px;\n}\n\n.feature_block .shuffle_card {\n    background: url('/image/feature_sprite.svg');\n    background-position: 0 -130px;\n    background-size: 130px 260px;\n}\n\n.feature_block:hover .shuffle_card {\n    background-position: -65px -130px;\n    background-size: 130px 260px;\n}\n\n.feature_block .add_to_learn {\n    background: url('/image/feature_sprite.svg');\n    background-position: 0 -195px;\n    background-size: 130px 260px;\n}\n\n.feature_block:hover .add_to_learn {\n    background-position: -65px -195px;\n    background-size: 130px 260px;\n}\n\n.content .edit-feature {\n    display: flex;\n    flex-flow: column;\n    position: absolute;\n    top: 0;\n    right: 0;\n}\n\n\n@media screen and (max-width: 700px){\n    .content .edit-feature {\n       position: relative;\n       flex-flow: row;\n       justify-content: flex-end;\n       margin-bottom: 10px;\n    }\n\n    .content .paging {\n        font-size: 12px;\n        top: 5px;\n        left: 10px;\n    }\n}\n\n.content .edit-feature_block {\n    width: 45px;\n    height: 45px;\n    cursor: pointer;\n    border-radius: 50%;\n    box-shadow: 0 0 5px silver;\n    background-color: white;\n    margin: 5px 5px 10px 5px;\n}\n\n.content .edit-feature_block .block_img {\n    width: 100%;\n    height: 100%;\n    font-size: 0;\n    border-radius: 50%;\n}\n\n.edit-feature_block .hot_key {\n    background: url('/image/card_feature_sprite.svg');\n    background-position: 0 0;\n    background-size: 90px 180px;\n    background-color: white;\n}\n\n\n.edit-feature_block:hover .hot_key {\n    background-position: -45px 0;\n    background-size: 90px 180px;\n    background-color: white;\n}\n\n.edit-feature_block .exchange_cards {\n    background: url('/image/card_feature_sprite.svg');\n    background-position: 0 -45px;\n    background-size: 90px 180px;\n    background-color: white;\n}\n\n\n.edit-feature_block:hover .exchange_cards {\n    background-position: -45px -45px;\n    background-size: 90px 180px;\n    background-color: white;\n}\n\n.edit-feature_block .edit_collection {\n    background: url('/image/card_feature_sprite.svg');\n    background-position: 0 -90px;\n    background-size: 90px 180px;\n    background-color: white;\n}\n\n.edit-feature_block:hover .edit_collection {\n    background-position: -45px -90px;\n    background-size: 90px 180px;\n    background-color: white;\n}\n\n.edit-feature_block .delete_collection {\n    background: url('/image/card_feature_sprite.svg');\n    background-position: 0 -135px;\n    background-size: 90px 180px;\n    background-color: white;\n}\n\n.edit-feature_block:hover .delete_collection {\n    background-position: -45px -135px;\n    background-size: 90px 180px;\n    background-color: white;\n}\n\n@media screen and (max-width: 850px) {\n    .content .wrap {\n        display: flex;\n        flex-flow: column;\n        margin: 0;\n    }\n\n    .features {\n        position: relative;\n        order: 2;\n        flex-flow: row wrap;\n    }\n\n    .feature_block {\n        margin: 10px;\n    }\n}\n\n@media screen and (max-width: 550px) {\n    .content .show_card {\n        height: 40vh;\n        min-height: 250px;\n    }  \n\n    .content .show_card_hover span {\n        display: none;\n    }\n}\n\n@media screen and (max-width: 500px){\n    .content .edit-feature_block {\n       width: 40px;\n       height: 40px;\n       margin-bottom: 0;\n    }\n\n    .edit-feature_block .hot_key {\n        background: url('/image/card_feature_sprite.svg');\n        background-position: 0 0;\n        background-size: 80px 160px;\n        background-color: white;\n    }\n    \n    \n    .edit-feature_block:hover .hot_key {\n        background-position: -40px 0;\n        background-size: 80px 160px;\n        background-color: white;\n    }\n    \n    .edit-feature_block .exchange_cards {\n        background: url('/image/card_feature_sprite.svg');\n        background-position: 0 -40px;\n        background-size: 80px 160px;\n        background-color: white;\n    }\n    \n    \n    .edit-feature_block:hover .exchange_cards {\n        background-position:  -40px -40px;\n        background-size: 80px 160px;\n        background-color: white;\n    }\n    \n    .edit-feature_block .edit_collection {\n        background: url('/image/card_feature_sprite.svg');\n        background-position: 0 -80px;\n        background-size: 80px 160px;\n        background-color: white;\n    }\n    \n    .edit-feature_block:hover .edit_collection {\n        background-position: -40px -80px;\n        background-size: 80px 160px;\n        background-color: white;\n    }\n    \n    .edit-feature_block .delete_collection {\n        background: url('/image/card_feature_sprite.svg');\n        background-position: 0 -120px;\n        background-size: 80px 160px;\n        background-color: white;\n    }\n    \n    .edit-feature_block:hover .delete_collection {\n        background-position: -40px -120px;\n        background-size: 80px 160px;\n        background-color: white;\n    }\n}\n\n@media screen and (max-width: 450px) {\n    .content .feature_block {\n        margin: 5px;\n        width: 80px;\n        height: 80px;\n    }\n\n    .feature_block .block_img {\n        width: 45px;\n        height: 45px;\n    }\n\n    .feature_block .card_test {\n        background: url('/image/feature_sprite.svg');\n        background-position: 0 0;\n        background-size: 90px 180px;\n    }\n    \n    .feature_block:hover .card_test {\n        background-position: -45px 0; \n        background-size: 90px 180px;\n    }\n    \n    .feature_block .match_game {\n        background: url('/image/feature_sprite.svg');\n        background-position: 0 -45px;\n        background-size: 90px 180px;\n    }\n    \n    .feature_block:hover .match_game {\n        background-position: -45px -45px;\n        background-size: 90px 180px;\n    }\n    \n    .feature_block .shuffle_card {\n        background: url('/image/feature_sprite.svg');\n        background-position: 0 -90px;\n        background-size: 90px 180px;\n    }\n    \n    .feature_block:hover .shuffle_card {\n        background-position: -45px -90px;\n        background-size: 90px 180px;\n    }\n\n    .feature_block .add_to_learn {\n        background: url('/image/feature_sprite.svg');\n        background-position: 0 -135px;\n        background-size: 90px 180px;\n    }\n    \n    .feature_block:hover .add_to_learn {\n        background-position: -45px -135px;\n        background-size: 90px 180px;\n    }\n}\n\n.content .show_card p {\n    font-size: 20px;\n    font-size: 3.5vh;\n    color: #333333;\n    margin: -10px auto;\n}\n\n.img_wrap {\n    width: 50%;\n    padding-bottom: 50%;\n    position: relative;\n    margin-bottom: 10px;\n}\n\n.img_wrap img {\n    object-fit: cover;\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n\n.content .show_card_hover {\n    color: white;\n    width: 100%;\n    height: 40px;\n    line-height: 40px;\n    padding-right: 10px;\n    text-align: right;\n    position: absolute;\n    bottom: 0;\n    visibility: hidden;\n}\n\n.content .show_card:hover .show_card_hover {\n    visibility: visible;\n}\n\n.white-overlay-cover {\n    display: flex;\n    position: fixed;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    top: 0;\n    background-color: white;\n    z-index: 5;\n}\n\n.white-overlay-cover .loading {\n    width: 60px;\n    height: 60px;\n    margin: auto;\n}\n\n.card_feature {\n    position: absolute;\n    top: 6px;\n    right: 8px;\n    display: flex;\n    flex-flow: row;\n}\n\n.card_feature div {\n    width: 35px;\n    height: 35px;\n}\n\n.card_feature .speak {\n    background-image: url('/image/speak_sprite.svg');\n    background-position-y: 0;\n    background-size: 70px;\n}\n\n.card_feature .star_card {\n    background: url('/image/speak_sprite.svg') 0 -35px;\n    background-size: 70px;  \n}\n\n.card_feature .star_card_mark {\n    background: url('/image/speak_sprite.svg') -35px -35px;\n    background-size: 70px;  \n}\n\n.card_flip_area {\n    width: 100%;\n    height: 100%;\n    margin: 35px 0;\n    display: flex;\n    flex-flow: column;\n    justify-content: center;\n    align-items: center;\n}\n\n.hot_key_popup {\n    height: 170px;\n}\n\n.keyarrow, .key_description {\n    display: flex;\n    flex-flow: row;\n    justify-content: center;\n    align-items: center;\n    z-index: 3;\n}\n\n.key_description {\n    width: 50%;\n}\n\n.keyarrow {\n    width: 35px;\n    height: 35px;\n    color: rgb(255, 196, 0);\n    font-weight: 700;\n    border: 1px solid rgb(255, 196, 0);\n    box-shadow: 2px 2px 0 rgb(255, 196, 0);\n    background-color: white;\n    border-radius: 5px;\n    margin-right: 8px;\n}\n\n.continue_test .familiarity_description {\n    font-size: 20px;\n    margin-bottom: 20px;\n    color: #5f5f5f;\n}\n\n.continue_test .average_percent {\n    font-size: 40px;\n    color: #333333;\n    margin-bottom: 40px;\n}\n\n/* ---------- animation ---------- */\n.open {\n    animation-name: flipInX;\n    animation-duration: .5s;\n}\n\n@keyframes flipInX {\n    from {\n        transform: perspective(600px) rotate3d(1, 0, 0, 90deg);\n        animation-timing-function: ease-in;\n        opacity: 0;\n    }\n\n    40% {\n        transform: perspective(600px) rotate3d(1, 0, 0, -3deg);\n        animation-timing-function: ease-in;\n    }\n\n    60% {\n        transform: perspective(600px) rotate3d(1, 0, 0, 3deg);\n        opacity: 1;\n    }\n\n    80% {\n        transform: perspective(600px) rotate3d(1, 0, 0, 0deg);\n    }\n\n    to {\n        transform: perspective(600px);\n    }\n}\n\n.ease {\n    animation-name: ease-in-out;\n    animation-duration: .25s;\n}\n\n@keyframes ease-in-out {\n    from {\n        animation-timing-function: ease-in;\n        opacity: 0;\n    }\n\n    60% {\n        opacity: 0.5;\n    }\n\n    to {\n        opacity: 1;\n    }\n}",""])},548:function(e,n,t){(e.exports=t(44)(!1)).push([e.i,".test_area {\n    width: 100%;\n    display: flex;\n    justify-content: center;\n}\n\n.test_area button {\n    width: 200px;\n    max-width: none;\n    margin: 20px auto 0 auto;\n}\n\n.test_guide, .continue_test, .test {\n    text-align: center;\n    line-height: 30px;\n}\n\n.test_area h1 {\n    color: rgb(1, 192, 192);\n    border-bottom: 3px solid #FFE20E;\n    font-weight: 700;\n    margin-bottom: 20px;\n    line-height: 60px;\n}\n\n.test h1 {\n    border-bottom: none;\n}\n\n.test input {\n    font-size: 20px;\n    width: 90%;\n    max-width: 300px;\n}\n\n.back_to_collection {\n    position: fixed;\n    bottom: 30px;\n    right: 30px;\n    width: 50px;\n    height: 50px;\n    border-radius: 50%;\n    box-shadow: 0 0 5px silver;\n    background: url('/image/back_arrow_sprite.svg') 0 0;\n    background-size: 100px 50px;\n    background-color: white;\n}\n\n.back_to_collection:hover {\n    background: url('/image/back_arrow_sprite.svg') -50px 0;\n    background-size: 100px 50px;\n    background-color: white;\n}\n\n",""])},549:function(e,n,t){(e.exports=t(44)(!1)).push([e.i,".game_area {\n    display: flex;\n    flex-flow: row wrap;\n    height: 100%;\n    width: 100%;\n}\n\n.game_time {\n    width: 100%;\n    text-align: center;\n    color: rgb(1, 192, 192);\n}\n\n.game_card {\n    border: 3px solid white;\n    width: 21%;\n    padding-bottom: 21%;\n    margin: 2%;\n    position: relative;\n    border-radius: 5%;\n    box-shadow: 0 0 3px silver;\n    cursor: pointer;\n    background-color: white;\n}\n\n.show_word {\n    box-sizing: border-box;\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 100%;\n    border-radius: 5%;\n    padding: 5px;\n}\n\n\n.active {\n    border: 3px solid #ffe20e;\n}\n\n.correct {\n    animation-name: pulse;\n    animation-duration: .75s;\n    border: 3px solid rgb(1, 192, 192);\n    visibility: hidden;\n}\n\n.wrong {\n    animation-name: rubberBand;\n    animation-duration: .25s;\n    border: 3px solid #e72d10;\n}\n\n@media screen and (max-width: 700px) {\n    .game_card {\n        width: 29.333%;\n        padding-bottom: 29.333%;\n        margin: 2%;\n    }\n    .game_time {\n        margin-bottom: 10px;\n    }\n    .show_word {\n        font-size: 15px;\n    }\n}\n\n/* ---------- animation ---------- */\n@keyframes pulse {\n    from {\n        transform: scale3d(1, 1, 1);\n        border: 3px solid #ffe20e;\n        visibility: visible;\n    }\n\n    60% {\n        transform: scale3d(1.1, 1.1, 1.1);\n        opacity: 0.8;\n    }\n\n    40% {\n        transform: scale3d(0.8, 0.8, 0.8);\n        opacity: 0.5;\n    }\n\n    to {\n        transform: scale3d(0.5, 0.5, 0.5);\n        border: 3px solid rgb(1, 192, 192);\n        opacity: 0;\n        visibility: hidden;\n    }\n}\n\n@keyframes rubberBand {\n    from {\n        transform: rotate(0deg);\n        border: 3px solid #e72d10;\n    }\n\n    20% {\n        transform: rotate(3deg);\n    }\n\n    40% {\n        transform: rotate(-3deg);\n    }\n\n    60% {\n        transform: rotate(3deg);\n    }\n\n    80% {\n        transform: rotate(-3deg);\n    }\n\n    to {\n        transform: rotate(0deg);\n        border: 3px solid #e72d10;\n    }\n}\n",""])},552:function(e,n,t){"use strict";t.r(n);var o=t(0),r=t.n(o),i=t(262),a=t.n(i),c=t(3),l=t(45),s=t(7),u=t(5),p=t(264),d=t(265),h="LOGIN_TO_WEB";var f="LOGOUT";function m(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},o=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.forEach(function(n){g(e,n,t[n])})}return e}function g(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var b={loginState:{login:!1,user_name:"",user_id:"",user_photo:""}};var y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case h:return m({},e,{loginState:{login:!0,user_name:n.user.displayName,user_id:n.user.uid,user_photo:n.user.photoURL?n.user.photoURL:"/image/user.svg"}});case f:return m({},e,{loginState:{login:!1,user_name:"",user_id:"",user_photo:""}});default:return e}},x="SEARCH_BAR_TOGGLE";function v(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var w={mobileSearchBarOpen:!1};var k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w;switch((arguments.length>1?arguments[1]:void 0).type){case x:return function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},o=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.forEach(function(n){v(e,n,t[n])})}return e}({},e,{mobileSearchBarOpen:!e.mobileSearchBarOpen});default:return e}};function _(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},o=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.forEach(function(n){E(e,n,t[n])})}return e}function E(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var S="ADD_NEW_COLLECTION";var O="COPY_TO_SELF_COLLECTION";var C="UPDATE_COLLECTION";function j(e,n,t){return function(o,r,i){for(var a=i.getFirestore,c=e.content.slice(),l=0;l<c.length;l++)delete c[l].showWord,delete c[l].showDef;a().collection("collection").doc(n).set(_({},e,{content:c})).then(function(){o({type:C,typeStr:t})}).catch(function(e){console.log(e),alert("發生問題請再試一次")})}}var N="RESET_SUBMIT_STATUS";var P="DELETE_COLLECTION";var T="ALREADY_HAD_COLLECTION";function I(e){return{type:T,status:e}}var z="GET_COLLECTION";function A(){return{type:z}}function R(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},o=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.forEach(function(n){L(e,n,t[n])})}return e}function L(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var H={collectionEmpty:!0,getCollection:!1,collection:{},submitStatus:""};var D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case S:return R({},e,{submitStatus:n.typeStr});case O:return e;case C:return R({},e,{submitStatus:n.typeStr});case N:return R({},e,{submitStatus:""});case P:return e;case T:return R({},e,{collectionEmpty:n.status});case z:return R({},e,{getCollection:!0});default:return e}},B=t(71),F=t(9),U=Object(u.combineReducers)({mobileSearchBar:k,login:y,collection:D,firestore:B.firestoreReducer,firebase:F.firebaseReducer}),M=t(113),W=t.n(M);t(525),t(527),t(553);W.a.initializeApp({apiKey:"AIzaSyAgHnQn9hkMJvGRwuHEIwAdjLxMFTIWF_o",authDomain:"soy-transducer-236303.firebaseapp.com",databaseURL:"https://soy-transducer-236303.firebaseio.com",projectId:"soy-transducer-236303",storageBucket:"soy-transducer-236303.appspot.com",messagingSenderId:"890374072270"});var q=W.a.storage();function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Q(e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J(e,n){return(J=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}var Y=function(e){function n(e){var t,o,r;return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),o=this,(t=!(r=Q(n).call(this,e))||"object"!==K(r)&&"function"!=typeof r?X(o):r).state={logoutBlock:!1,logoutState:!1,keyword:"",loginRequest:!1},t.openSearchBarToggle=t.openSearchBarToggle.bind(X(t)),t.logoutBlockToggle=t.logoutBlockToggle.bind(X(t)),t.logout=t.logout.bind(X(t)),t.searchKeyword=t.searchKeyword.bind(X(t)),t.startSearch=t.startSearch.bind(X(t)),t.loginRequestPopup=t.loginRequestPopup.bind(X(t)),t}var t,o,i;return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&J(e,n)}(n,r.a.Component),t=n,(o=[{key:"openSearchBarToggle",value:function(){this.props.searchBarOpen()}},{key:"logoutBlockToggle",value:function(){this.setState({logoutBlock:!this.state.logoutBlock})}},{key:"logout",value:function(){this.setState({logoutState:!0}),this.props.logout()}},{key:"searchKeyword",value:function(e){this.setState({keyword:e.target.value})}},{key:"startSearch",value:function(e){e.preventDefault(),""!==this.state.keyword.trim()?(window.location.hash="/Search/"+this.state.keyword.trim(),this.setState({keyword:""}),this.openSearchBarToggle()):this.setState({keyword:""})}},{key:"loginRequestPopup",value:function(e){"取消"===e.target.textContent?this.setState({loginRequest:!1}):this.setState({loginRequest:!0})}},{key:"render",value:function(){return this.state.logoutState?r.a.createElement(l.a,{to:"/"}):("anonymous"===this.props.loginState.user_id?(e="登 入",n=r.a.createElement("div",{onClick:this.loginRequestPopup,className:"add_card"},r.a.createElement("img",{className:"add_card icon",src:"../../image/add card.svg"}),r.a.createElement("p",null,"建立字卡"))):(e="登 出",n=r.a.createElement(c.b,{to:"/MakingCards/new",exact:!0,className:"add_card"},r.a.createElement("img",{className:"add_card icon",src:"../../image/add card.svg"}),r.a.createElement("p",null,"建立字卡"))),r.a.createElement("header",null,r.a.createElement("div",{className:"popup-overlay",style:{display:this.state.loginRequest?"flex":"none"}},r.a.createElement("div",{className:"deletecheck-popup"},r.a.createElement("p",{style:{zIndex:5}},"立即登入 / 註冊建立字卡",r.a.createElement("br",null),"體驗完整功能！"),r.a.createElement("button",{className:"cancel",onClick:this.loginRequestPopup},"取消"),r.a.createElement("button",{className:"confirm",onClick:this.logout},"登入"),r.a.createElement("div",{className:"deletecheck-popup-background"}))),r.a.createElement("div",{className:"container"},r.a.createElement(c.b,{to:"/",exact:!0,style:{padding:0}},r.a.createElement("img",{src:"../../image/Logo.svg",className:"logo"})),n,this.props.children,r.a.createElement("form",{className:"search_bar",onSubmit:this.startSearch},r.a.createElement("input",{className:"search_input",onChange:this.searchKeyword,value:this.state.keyword,placeholder:"搜尋全站字卡集"}),r.a.createElement("img",{className:"search_btn icon",src:"../../image/search.svg",onClick:this.startSearch})),r.a.createElement("div",{className:"search_bar_mobile"},r.a.createElement("img",{className:"search_btn_top icon",src:"../../image/search_mobile.svg",onClick:this.openSearchBarToggle,style:{display:this.props.searchBarToggle?"none":"block"}}),r.a.createElement("img",{className:"search_btn_top icon",src:"../../image/close.svg",onClick:this.openSearchBarToggle,style:{display:this.props.searchBarToggle?"flex":"none"}}),r.a.createElement("form",{className:"search_bar_mobile_input",style:{display:this.props.searchBarToggle?"flex":"none"},onSubmit:this.startSearch},r.a.createElement("input",{className:"search_input",onChange:this.searchKeyword,value:this.state.keyword,placeholder:"搜尋全站字卡集"}),r.a.createElement("img",{className:"search_btn_down icon",src:"../../image/search.svg",onClick:this.startSearch}))),r.a.createElement("div",{className:"log_out",style:{display:this.state.logoutBlock?"block":"none"},onClick:this.logout},e),r.a.createElement("div",{className:"member icon",style:{backgroundImage:this.props.loginState.login?"url(".concat(this.props.loginState.user_photo,")"):"url('../../image/user.svg')"},onClick:this.logoutBlockToggle}))));var e,n}}])&&G(t.prototype,o),i&&G(t,i),n}(),V=Object(s.b)(function(e){return{searchBarToggle:e.mobileSearchBar.mobileSearchBarOpen,loginState:e.login.loginState}},function(e){return{searchBarOpen:function(){e({type:x})},logout:function(){e(function(e,n,t){(0,t.getFirebase)().auth().signOut().then(function(){e({type:f}),window.location.href="/"}).catch(function(e){console.log(e),alert("發生問題請再試一次")})})}}})(Y);var Z=function(){return r.a.createElement("div",{className:"background"},r.a.createElement("div",{className:"background_triangle"}),r.a.createElement("div",{className:"background_square"}))};function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ee(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ne(e){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function te(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oe(e,n){return(oe=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}var re=function(e){function n(e){var t,o,r;return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),o=this,(t=!(r=ne(n).call(this,e))||"object"!==$(r)&&"function"!=typeof r?te(o):r).login=t.login.bind(te(t)),t}var t,o,i;return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&oe(e,n)}(n,r.a.Component),t=n,(o=[{key:"login",value:function(e){var n;n="使用 Facebook 登入"===e.target.textContent?"facebook":"使用 Google 登入"===e.target.textContent?"google":"",this.props.login_reducer(n)}},{key:"componentDidMount",value:function(){this.props.loginCheck()}},{key:"render",value:function(){return r.a.createElement("div",{className:"popup-overlay",style:{display:this.props.loginState.login?"none":"flex"}},r.a.createElement("div",{className:"popup-content"},r.a.createElement("div",{className:"modal"},r.a.createElement("div",{className:"header"},r.a.createElement("img",{src:"../../image/Logo.svg"}),"馬上登入 / 註冊建立字卡學習"),r.a.createElement("div",{className:"actions"},r.a.createElement("button",{className:"button",onClick:this.login},r.a.createElement("img",{src:"../../image/facebook.svg"}),"使用 Facebook 登入"),r.a.createElement("button",{className:"button",onClick:this.login},r.a.createElement("img",{src:"../../image/google.svg"}),"使用 Google 登入"),r.a.createElement("button",{className:"button",onClick:this.login},r.a.createElement("img",{src:"../../image/user.svg"}),"使用 訪客身份 瀏覽")))))}}])&&ee(t.prototype,o),i&&ee(t,i),n}(),ie=Object(s.b)(function(e){return{loginState:e.login.loginState}},function(e){return{login_reducer:function(n){e(function(e){return function(n,t,o){var r=(0,o.getFirebase)();""!==e?("facebook"===e?e=new r.auth.FacebookAuthProvider:"google"===e&&(e=new r.auth.GoogleAuthProvider),r.auth().signInWithPopup(e).then(function(e){var t=e.user;n({type:h,user:t})}).catch(function(e){console.log(e),alert("發生問題請再試一次")})):n({type:h,user:{displayName:"訪客",uid:"anonymous",photoURL:null}})}}(n))},loginCheck:function(){e(function(e,n,t){(0,t.getFirebase)().auth().onAuthStateChanged(function(n){n&&e({type:h,user:n})})})}}})(re);var ae=function(e){var n;return e.public||(n=r.a.createElement("div",{className:"not_open"})),r.a.createElement(c.b,{to:"/Collection/"+e.id,className:"collection"},r.a.createElement("h2",null,e.title),r.a.createElement("p",{className:"words_number"},"語言：",e.wordLan," / ",e.defLan),r.a.createElement("p",{className:"words_number"},"詞語：",e.contentLength," 個"),r.a.createElement("div",{className:"creator_grid"},r.a.createElement("p",null,e.author),r.a.createElement("img",{src:e.user_photo})),n)};function ce(e){return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function le(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function se(e){return(se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ue(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pe(e,n){return(pe=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}var de=function(e){function n(e){var t,o,r;return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),o=this,(t=!(r=se(n).call(this,e))||"object"!==ce(r)&&"function"!=typeof r?ue(o):r).state={pageLocation:"self",selfActive:"page_active",wholeActive:""},t.changePage=t.changePage.bind(ue(t)),t}var t,o,i;return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&pe(e,n)}(n,r.a.Component),t=n,(o=[{key:"changePage",value:function(e){"你的字卡集"===e.target.textContent?this.setState({pageLocation:"self",selfActive:"page_active",wholeActive:""}):this.setState({pageLocation:"whole",selfActive:"",wholeActive:"page_active"})}},{key:"componentDidUpdate",value:function(e){this.props!==e&&this.props.getCollection()}},{key:"render",value:function(){var e=this.props.login.user_id,n=this.props.collectionInfo,t=!0;return void 0!==n&&("self"===this.state.pageLocation?n=n.filter(function(n){return n.user_id===e}):(n=n.filter(function(e){return e.public})).splice(9),0===n.length?this.props.alreadyHadCollection(!1):this.props.alreadyHadCollection(!0),t=this.props.hadCollection),"anonymous"===e?r.a.createElement(l.a,{to:"/Recent/"}):r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"white-overlay",style:{display:(this.props.getData,"none")}},r.a.createElement("img",{className:"loading",src:"../../image/loading.gif"})),r.a.createElement("div",{className:"page_location",style:{display:this.props.login.login?"flex":"none"}},r.a.createElement("div",{onClick:this.changePage,className:this.state.selfActive},"你的字卡集"),r.a.createElement("span",null,"|"),r.a.createElement("div",{onClick:this.changePage,className:this.state.wholeActive},"全站近期新增")),r.a.createElement("div",{style:{display:this.props.login.login?"flex":"none",width:"100%"}},r.a.createElement("div",{style:{display:t?"none":"flex"},className:"first_time_hint"},r.a.createElement("h3",null,"任選一個方式開始吧！"),r.a.createElement(c.b,{to:"/MakingCards/new",exact:!0,className:"collection"},r.a.createElement("div",{className:"wrap_new"},r.a.createElement("div",{className:"search_lan new_card"}),r.a.createElement("p",null,"新建自己的字卡"))),r.a.createElement("div",{onClick:this.changePage,className:"collection"},r.a.createElement("div",{className:"wrap_new"},r.a.createElement("div",{className:"search_lan recent_card"}),r.a.createElement("p",null,"看看其他人的字卡"))),r.a.createElement("div",{className:"collection"},r.a.createElement("div",{className:"wrap_new"},r.a.createElement(c.b,{className:"search_lan english",to:"/Search/英文",exact:!0}),r.a.createElement(c.b,{className:"search_lan japanese",to:"/Search/日文",exact:!0}),r.a.createElement(c.b,{className:"search_lan korean",to:"/Search/韓文",exact:!0}),r.a.createElement("p",null,"搜尋特定語言"))))),n&&n.map(function(e,n){return r.a.createElement(ae,{key:n,label:n,title:e.title,contentLength:e.content.length,wordLan:e.word_lan.text,defLan:e.definition_lan.text,author:e.author,time:e.timestamp,id:e.id,public:e.public,copyFromOther:e.copyFromOther,user_photo:e.user_photo})}))}}])&&le(t.prototype,o),i&&le(t,i),n}(),he=Object(u.compose)(Object(s.b)(function(e){return{hadCollection:e.collection.collectionEmpty,getData:e.collection.getCollection,collectionInfo:e.firestore.ordered.collection,login:e.login.loginState}},function(e){return{alreadyHadCollection:function(n){e(I(n))},getCollection:function(){e(A())}}}),Object(F.firestoreConnect)([{collection:"collection",orderBy:["timestamp","desc"]}]))(de);function fe(e){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function me(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ge(e){return(ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function be(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ye(e,n){return(ye=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}var xe=function(e){function n(e){var t,o,r;return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),o=this,(t=!(r=ge(n).call(this,e))||"object"!==fe(r)&&"function"!=typeof r?be(o):r).state={showing:e.word,showing_lan:e.word_lan,open:"",pic_showing:!1,speakBackground:"0"},t.flipCard=t.flipCard.bind(be(t)),t.speak=t.speak.bind(be(t)),t.keyHandle=t.keyHandle.bind(be(t)),t}var t,o,i;return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&ye(e,n)}(n,r.a.Component),t=n,(o=[{key:"flipCard",value:function(){var e=this;this.state.showing===this.props.word?(this.setState({showing:this.props.definition,showing_lan:this.props.definition_lan}),""!==this.props.picture&&this.setState({pic_showing:!0})):this.setState({showing:this.props.word,showing_lan:this.props.word_lan,pic_showing:!1}),this.setState({open:"open"}),setTimeout(function(){e.setState({open:""}),e.speak()},500)}},{key:"speak",value:function(){var e=this,n=window.speechSynthesis;if(!n.speaking){this.setState({speakBackground:"-35px"});var t=new SpeechSynthesisUtterance(this.state.showing);t.lang=this.state.showing_lan,n.speak(t),t.onend=function(){e.setState({speakBackground:"0"})}}}},{key:"keyHandle",value:function(e){"ArrowUp"===e.key?this.flipCard():"ArrowDown"===e.key&&this.speak()}},{key:"componentDidUpdate",value:function(e){this.props.word!==e.word&&this.setState({showing:this.props.word,showing_lan:this.props.word_lan,pic_showing:""})}},{key:"componentDidMount",value:function(){document.body.addEventListener("keyup",this.keyHandle)}},{key:"componentWillUnmount",value:function(){document.body.removeEventListener("keyup",this.keyHandle)}},{key:"render",value:function(){var e;return e=0===this.props.familiarity?"silver":this.props.familiarity<60?"rgb(252, 150, 150)":"rgb(143, 204, 143)",r.a.createElement("div",{className:"show_card ".concat(this.state.open," ").concat(this.props.nextAnimation)},r.a.createElement("div",{className:"card_flip_area",onClick:this.flipCard},r.a.createElement("div",{style:{display:this.state.pic_showing?"block":"none"},className:"img_wrap"},r.a.createElement("img",{src:this.props.picture})),r.a.createElement("p",{className:"text-align-center"},this.state.showing),r.a.createElement("div",{className:"paging"},this.props.currentIndex+1,"/",this.props.length),r.a.createElement("div",{className:"show_card_hover",style:{color:e,display:this.props.notSelf?"none":"block"}},r.a.createElement("span",null,"熟悉程度："),this.props.familiarity,"%")),r.a.createElement("div",{className:"card_feature"},r.a.createElement("div",{onClick:this.speak,className:"speak",style:{backgroundPositionX:this.state.speakBackground}})))}}])&&me(t.prototype,o),i&&me(t,i),n}();function ve(e){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function we(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},o=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.forEach(function(n){ke(e,n,t[n])})}return e}function ke(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function _e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ee(e){return(Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Se(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oe(e,n){return(Oe=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}var Ce=function(e){function n(e){var t,o,r;return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),o=this,(t=!(r=Ee(n).call(this,e))||"object"!==ve(r)&&"function"!=typeof r?Se(o):r).state={collection:null,currentIndex:0,nextAnimation:"",deleteState:!1,deleteCheck:!1,mobile:!1,showHotKeyHint:!1},t.changeCard=t.changeCard.bind(Se(t)),t.shuffleCards=t.shuffleCards.bind(Se(t)),t.exchangeWordDef=t.exchangeWordDef.bind(Se(t)),t.deleteCheckHandler=t.deleteCheckHandler.bind(Se(t)),t.deleteCollection=t.deleteCollection.bind(Se(t)),t.showKeyHint=t.showKeyHint.bind(Se(t)),t.keyHandle=t.keyHandle.bind(Se(t)),t.copyHandler=t.copyHandler.bind(Se(t)),t}var t,o,i;return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&Oe(e,n)}(n,r.a.Component),t=n,(o=[{key:"changeCard",value:function(e){var n=this,t=this.state.currentIndex;void 0===e.key?"前一個"===e.target.title?t-=1:t+=1:"ArrowLeft"===e.key?t-=1:"ArrowRight"===e.key&&(t+=1),t<this.props.collection.content.length&&t>=0&&(this.setState({currentIndex:t,nextAnimation:"ease"}),setTimeout(function(){n.setState({nextAnimation:""})},500))}},{key:"deleteCheckHandler",value:function(e){"刪除"===e.target.textContent?this.setState({deleteCheck:!0}):this.setState({deleteCheck:!1})}},{key:"deleteCollection",value:function(){this.setState({deleteState:!0,deleteCheck:!1});var e=this.props.match.params.id;this.props.deleteCollection(e)}},{key:"shuffleCards",value:function(){for(var e,n,t=this,o=this.state.collection.content.slice(),r=0;r<o.length;r++)n=Math.floor(Math.random()*o.length),e=o[r],o[r]=o[n],o[n]=e;this.setState({collection:we({},this.state.collection,{content:o}),currentIndex:0,nextAnimation:"ease"}),setTimeout(function(){t.setState({nextAnimation:""})},500)}},{key:"exchangeWordDef",value:function(){for(var e,n=this,t=this.state.collection.content.slice(),o=0;o<t.length;o++)e=t[o].showWord,t[o].showWord=t[o].showDef,t[o].showDef=e;var r=this.state.collection.word_lan,i=r;r=this.state.collection.definition_lan,this.setState({collection:we({},this.state.collection,{word_lan:r,definition_lan:i,content:t}),nextAnimation:"ease"}),setTimeout(function(){n.setState({nextAnimation:""})},500)}},{key:"showKeyHint",value:function(){this.setState(function(e){return{showHotKeyHint:!e.showHotKeyHint}})}},{key:"keyHandle",value:function(e){"ArrowLeft"!==e.key&&"ArrowRight"!==e.key||this.changeCard(e)}},{key:"copyHandler",value:function(){var e=this.props.login,n=this.props.match.params.id;this.props.copyToSelfCollection(n,e)}},{key:"componentDidUpdate",value:function(e){if(this.props.collection!==e.collection){for(var n=this.props.collection.content.slice(),t=0;t<n.length;t++)n[t].showWord=n[t].word,n[t].showDef=n[t].definition;this.setState({collection:we({},this.props.collection,{content:n})})}}},{key:"componentDidMount",value:function(){if(!!navigator.userAgent&&/(mobile)/i.test(navigator.userAgent)&&this.setState({mobile:!0}),document.body.addEventListener("keyup",this.keyHandle),null!==this.props.collection){for(var e=this.props.collection.content.slice(),n=0;n<e.length;n++)e[n].showWord=e[n].word,e[n].showDef=e[n].definition;this.setState({collection:we({},this.props.collection,{content:e})})}}},{key:"componentWillUnmount",value:function(){document.body.removeEventListener("keyup",this.keyHandle)}},{key:"render",value:function(){var e,n,t=this,o=this.state.currentIndex,i=!1,a=!1,s=this.props.login.user_id;return null!==this.state.collection&&(e=[this.state.collection.content[o]],this.state.collection.user_id!==s&&(i=!0,n=r.a.createElement("div",{className:"feature_block",style:{display:i?"flex":"none"},onClick:this.copyHandler},r.a.createElement("div",{className:"add_to_learn block_img"}),r.a.createElement("div",null,"複製學習")),this.state.collection.public||(a=!0)),"anonymous"===s&&(n="")),this.state.deleteState||a||!this.props.login.login?r.a.createElement(l.a,{to:"/"}):r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"popup-overlay",style:{display:this.state.deleteCheck?"flex":"none"}},r.a.createElement("div",{className:"deletecheck-popup"},"確定要刪除此字卡集嗎？",r.a.createElement("button",{className:"cancel",onClick:this.deleteCheckHandler},"取消"),r.a.createElement("button",{className:"confirm",onClick:this.deleteCollection},"確定"),r.a.createElement("div",{className:"deletecheck-popup-background"}))),r.a.createElement("div",{className:"popup-overlay",style:{display:this.state.showHotKeyHint?"flex":"none"}},r.a.createElement("div",{className:"deletecheck-popup hot_key_popup"},r.a.createElement("div",{className:"key_description"},r.a.createElement("div",{className:"keyarrow"},"←"),"前一個"),r.a.createElement("div",{className:"key_description"},r.a.createElement("div",{className:"keyarrow"},"→"),"下一個"),r.a.createElement("div",{className:"key_description"},r.a.createElement("div",{className:"keyarrow"},"↑"),"翻字卡"),r.a.createElement("div",{className:"key_description"},r.a.createElement("div",{className:"keyarrow"},"↓"),"聽發音"),r.a.createElement("button",{className:"cancel",onClick:this.showKeyHint},"知道了"),r.a.createElement("div",{className:"deletecheck-popup-background"}))),r.a.createElement("div",{className:"wrap"},r.a.createElement("div",{className:"features"},r.a.createElement(c.b,{className:"feature_block",to:"/Test/"+this.props.match.params.id,style:{display:i?"none":"flex"}},r.a.createElement("div",{className:"card_test block_img"}),r.a.createElement("div",null,"字卡測驗")),n,r.a.createElement(c.b,{className:"feature_block",to:"/MatchGame/"+this.props.match.params.id},r.a.createElement("div",{className:"match_game block_img"}),r.a.createElement("div",null,"配對遊戲")),r.a.createElement(c.b,{className:"feature_block",onClick:this.shuffleCards},r.a.createElement("div",{className:"shuffle_card block_img"}),r.a.createElement("div",null,"隨機順序"))),r.a.createElement("div",{className:"cards_content"},r.a.createElement("div",{className:"edit-feature"},r.a.createElement("div",{className:"edit-feature_block",onClick:this.showKeyHint,style:{display:this.state.mobile?"none":"block"}},r.a.createElement("div",{className:"hot_key block_img",title:"快捷鍵說明"})),r.a.createElement("div",{className:"edit-feature_block",onClick:this.exchangeWordDef},r.a.createElement("div",{className:"exchange_cards block_img",title:"詞語定義交換"})),r.a.createElement(c.b,{className:"edit-feature_block",to:"/MakingCards/"+this.props.match.params.id,style:{display:i?"none":"block"}},r.a.createElement("div",{className:"edit_collection block_img",title:"編輯"})),r.a.createElement("div",{className:"edit-feature_block",onClick:this.deleteCheckHandler,style:{display:i?"none":"block"}},r.a.createElement("div",{className:"delete_collection block_img",title:"刪除"},"刪除"))),this.state.collection&&e.map(function(e,n){return r.a.createElement(xe,{key:n,label:n,currentIndex:o,word:e.showWord,definition:e.showDef,picture:e.pictureURL,familiarity:e.familiarity,word_lan:t.state.collection.word_lan.lan,definition_lan:t.state.collection.definition_lan.lan,nextAnimation:t.state.nextAnimation,length:t.props.collection.content.length,notSelf:i})}),r.a.createElement("div",{className:"arrows"},r.a.createElement("div",{className:"left-arrow",onClick:this.changeCard,title:"前一個"}),r.a.createElement("div",{className:"right-arrow",onClick:this.changeCard,title:"下一個"})))))}}])&&_e(t.prototype,o),i&&_e(t,i),n}(),je=Object(u.compose)(Object(s.b)(function(e,n){var t=n.match.params.id,o=e.firestore.data.collection;return{collection:o?o[t]:null,login:e.login.loginState}},function(e){return{deleteCollection:function(n){e(function(e){return function(n,t,o){(0,o.getFirestore)().collection("collection").doc(e).delete().then(function(){n({type:P})}).catch(function(e){console.log(e),alert("發生問題請再試一次")})}}(n))},copyToSelfCollection:function(n,t){e(function(e,n){return function(t,o,r){var i=(0,r.getFirestore)();i.collection("collection").doc(e).get({}).then(function(e){var o,r,a=new Date;o=a.getHours()<10?"0".concat(a.getHours()):a.getHours(),r=a.getMinutes()<10?"0".concat(a.getMinutes()):a.getMinutes();for(var c=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate()+" "+o+":"+r,l=e.data(),s=l.content.slice(),u=0;u<s.length;u++)s[u].familiarity=0;l=_({},l,{content:s,copyFromOther:!0,user_id:n.user_id,author:n.user_name,timestamp:c}),i.collection("collection").add(_({},l)).then(function(){t({type:O}),window.location.hash="/"}).catch(function(e){console.log(e),alert("發生問題請再試一次")})}).catch(function(e){console.log(e),alert("發生問題請再試一次")})}}(n,t))}}}),Object(F.firestoreConnect)([{collection:"collection"}]))(Ce);function Ne(e){return(Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pe(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Te(e){return(Te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ie(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ze(e,n){return(ze=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}var Ae=function(e){function n(e){var t,o,i;return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),o=this,(t=!(i=Te(n).call(this,e))||"object"!==Ne(i)&&"function"!=typeof i?Ie(o):i).state={previewPicToggle:!1},t.textInput=r.a.createRef(),t.focusTextInput=t.focusTextInput.bind(Ie(t)),t.deleteHandler=t.deleteHandler.bind(Ie(t)),t.uploadImgHandler=t.uploadImgHandler.bind(Ie(t)),t.deleteImgHandler=t.deleteImgHandler.bind(Ie(t)),t.wordInputHandler=t.wordInputHandler.bind(Ie(t)),t.defInputHandler=t.defInputHandler.bind(Ie(t)),t.previewPic=t.previewPic.bind(Ie(t)),t}var t,o,i;return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&ze(e,n)}(n,r.a.Component),t=n,(o=[{key:"focusTextInput",value:function(){this.textInput.current.focus()}},{key:"wordInputHandler",value:function(e){this.props.wordChange(this.props,e.target.value)}},{key:"defInputHandler",value:function(e){this.props.definitionChange(this.props,e.target.value)}},{key:"uploadImgHandler",value:function(e){this.props.compressImg(this.props,e)}},{key:"deleteImgHandler",value:function(){this.props.deleteImg(this.props),this.setState({previewPicToggle:!1})}},{key:"deleteHandler",value:function(){this.props.deleteCard(this.props)}},{key:"previewPic",value:function(e){"取消"===e.target.textContent?this.setState({previewPicToggle:!1}):this.setState({previewPicToggle:!0})}},{key:"componentDidUpdate",value:function(e){e.empty!==this.props.empty&&this.focusTextInput()}},{key:"render",value:function(){var e;return e=""===this.props.pictureName?r.a.createElement("label",{onChange:this.uploadImgHandler,className:"add_image",title:"增加圖片"}," ",r.a.createElement("input",{type:"file",style:{display:"none"},accept:"image/*"})," "):"loading"===this.props.pictureName?r.a.createElement("div",{className:"loading_image"}):r.a.createElement("div",{onClick:this.previewPic,className:"preview_image",style:{backgroundImage:"url(".concat(this.props.pictureURL,")")},title:"預覽圖片"}),r.a.createElement("div",{className:"making_card ease"},r.a.createElement("div",{className:"popup-overlay",style:{display:this.state.previewPicToggle?"flex":"none"}},r.a.createElement("div",{className:"deletecheck-popup",style:{height:"330px"}},r.a.createElement("p",null,"圖片預覽"),r.a.createElement("div",{style:{zIndex:5,border:"1px dashed silver",width:"80%",paddingBottom:"80%"},className:"img_wrap"},r.a.createElement("img",{src:this.props.pictureURL})),r.a.createElement("button",{className:"cancel",onClick:this.previewPic},"取消"),r.a.createElement("button",{className:"confirm",onClick:this.deleteImgHandler},"刪除"),r.a.createElement("div",{className:"deletecheck-popup-background"}))),r.a.createElement("input",{placeholder:"詞語",ref:this.textInput,onChange:this.wordInputHandler,value:this.props.word,style:{borderBottom:this.props.empty}}),r.a.createElement("input",{placeholder:"定義",onChange:this.defInputHandler,value:this.props.definition,style:{borderBottom:this.props.empty}}),e,r.a.createElement("div",{onClick:this.deleteHandler,className:"delete_card",title:"刪除字卡"}))}}])&&Pe(t.prototype,o),i&&Pe(t,i),n}(),Re=t(267),Le=t.n(Re);function He(e){return(He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function De(e){return function(e){if(Array.isArray(e)){for(var n=0,t=new Array(e.length);n<e.length;n++)t[n]=e[n];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Be(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},o=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.forEach(function(n){Fe(e,n,t[n])})}return e}function Fe(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Ue(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Me(e){return(Me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function We(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qe(e,n){return(qe=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}var Ke=function(e){function n(e){var t,o,i;return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),o=this,(t=!(i=Me(n).call(this,e))||"object"!==He(i)&&"function"!=typeof i?We(o):i).state={collection:{title:"",public:!0,word_lan:{lan:"en-US",text:"英文"},definition_lan:{lan:"en-US",text:"英文"},user_photo:t.props.login.user_photo,user_id:t.props.login.user_id,author:t.props.login.user_name,content:[{word:"",definition:"",familiarity:0,pictureURL:"",pictureName:"",empty:""},{word:"",definition:"",familiarity:0,pictureURL:"",pictureName:"",empty:""}]},borderBottom:"",submitOK:"",language:[{lan:"en-US",text:"英文"},{lan:"zh-TW",text:"中文"},{lan:"ja-JP",text:"日文"},{lan:"ko-KR",text:"韓文"},{lan:"fr-FR",text:"法文"},{lan:"hi-IN",text:"印度文"},{lan:"pl-PL",text:"波蘭文"},{lan:"id-ID",text:"印尼文"},{lan:"nl-NL",text:"荷蘭文"},{lan:"es-ES",text:"西班牙文"},{lan:"it-IT",text:"義大利文"},{lan:"pt-BR",text:"葡萄牙文"},{lan:"ru-RU",text:"俄羅斯文"}]},t.textInput=r.a.createRef(),t.focusTextInput=t.focusTextInput.bind(We(t)),t.changeTitle=t.changeTitle.bind(We(t)),t.changePublicState=t.changePublicState.bind(We(t)),t.changeWordLan=t.changeWordLan.bind(We(t)),t.changeDefinitionLan=t.changeDefinitionLan.bind(We(t)),t.wordChange=t.wordChange.bind(We(t)),t.definitionChange=t.definitionChange.bind(We(t)),t.addNewCard=t.addNewCard.bind(We(t)),t.deleteCard=t.deleteCard.bind(We(t)),t.compressImg=t.compressImg.bind(We(t)),t.uploadImg=t.uploadImg.bind(We(t)),t.deleteImg=t.deleteImg.bind(We(t)),t.uploadXlsx=t.uploadXlsx.bind(We(t)),t.submitCollection=t.submitCollection.bind(We(t)),t}var t,o,i;return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&qe(e,n)}(n,r.a.Component),t=n,(o=[{key:"focusTextInput",value:function(){this.textInput.current.focus()}},{key:"changeTitle",value:function(e){this.setState({collection:Be({},this.state.collection,{title:e.target.value}),borderBottom:""})}},{key:"changePublicState",value:function(e){"open"===e.target.value?this.setState({collection:Be({},this.state.collection,{public:!0})}):this.setState({collection:Be({},this.state.collection,{public:!1})})}},{key:"changeWordLan",value:function(e){var n;this.state.language.forEach(function(t){t.lan===e.target.value&&(n=t.text)}),this.setState({collection:Be({},this.state.collection,{word_lan:{lan:e.target.value,text:n}})})}},{key:"changeDefinitionLan",value:function(e){var n;this.state.language.forEach(function(t){t.lan===e.target.value&&(n=t.text)}),this.setState({collection:Be({},this.state.collection,{definition_lan:{lan:e.target.value,text:n}})})}},{key:"wordChange",value:function(e,n){var t=this.state.collection.content.slice();t[e.label].word=n,""!==t[e.label].empty&&(t[e.label].empty=""),this.setState({collection:Be({},this.state.collection,{content:t})})}},{key:"definitionChange",value:function(e,n){var t=this.state.collection.content.slice();t[e.label].definition=n,""!==t[e.label].empty&&(t[e.label].empty=""),this.setState({collection:Be({},this.state.collection,{content:t})})}},{key:"addNewCard",value:function(){this.state.collection.content.length>100?alert("一個字卡集最多只能放置100個字"):this.setState({collection:Be({},this.state.collection,{content:[].concat(De(this.state.collection.content),[{word:"",definition:"",familiarity:0,pictureURL:"",pictureName:"",empty:""}])})})}},{key:"compressImg",value:function(e,n){var t=this,o=n.target.files[0],r=new FileReader;r.readAsDataURL(o),r.onload=function(n){var r=new Image;r.src=n.target.result,r.onload=function(){if(r.width>299){var n=document.createElement("canvas"),i=300/r.width;n.width=300,n.height=r.height*i;var a=n.getContext("2d");a.drawImage(r,0,0,300,r.height*i),a.canvas.toBlob(function(n){var r=new File([n],o.name,{type:"image/jpeg",lastModified:Date.now()});t.uploadImg(e,r)},"image/jpeg",1)}else t.uploadImg(e,o)}}}},{key:"uploadImg",value:function(e,n){var t=this,o=this.state.collection.content.slice(),r=(new Date).getTime()+n.name;q.ref("images/".concat(r)).put(n).on("state_changed",function(){o[e.label].pictureName="loading",t.setState({collection:Be({},t.state.collection,{content:o})})},function(e){alert("圖片上傳發生問題請再試一次"),console.log(e)},function(){q.ref("images").child(r).getDownloadURL().then(function(n){o[e.label].pictureURL=n,o[e.label].pictureName=r,t.setState({collection:Be({},t.state.collection,{content:o})})})})}},{key:"deleteImg",value:function(e){var n=this.state.collection.content.slice();n[e.label].pictureURL="",n[e.label].pictureName="",this.setState({collection:Be({},this.state.collection,{content:n})})}},{key:"deleteCard",value:function(e){var n=this.state.collection.content.slice();n.splice(e.label,1),n.length>=2&&this.setState({collection:Be({},this.state.collection,{content:n})})}},{key:"uploadXlsx",value:function(e){var n=this,t=[],o=e.target.files[0],r=new FileReader;r.onload=function(e){for(var o=new Uint8Array(e.target.result),r=Le.a.read(o,{type:"array"}),i=0;i<r.Strings.length-1;i++)i%2==0&&t.push({word:r.Strings[i].t,definition:r.Strings[i+1].t,familiarity:0,pictureURL:"",pictureName:"",empty:""});n.setState({collection:Be({},n.state.collection,{content:t})})},r.readAsArrayBuffer(o)}},{key:"submitCollection",value:function(e){for(var n=this.state.collection.content.slice(),t=!1,o=0;o<n.length;o++)""!==n[o].word&&""!==n[o].definition||(n[o].empty="3px solid red",t=!0);if(this.setState({collection:Be({},this.state.collection,{content:n})}),""===this.state.collection.title)this.setState({borderBottom:"3px solid red"}),this.focusTextInput();else{if(t)return;if("建立"===e.target.textContent)this.props.addNewCollection(this.state.collection,"建立");else if("更新"===e.target.textContent){var r=this.props.match.params.id;this.props.updateCollection(this.state.collection,r,"更新")}}}},{key:"componentDidMount",value:function(){"new"!==this.props.match.params.id&&null!==this.props.editCollection&&this.setState({collection:this.props.editCollection}),this.props.resetSubmitStatus()}},{key:"componentDidUpdate",value:function(e){this.props!==e&&(this.setState({submitOK:this.props.submitStatus}),"new"===this.props.match.params.id?this.setState({collection:{title:"",public:!0,word_lan:{lan:"en-US",text:"英文"},definition_lan:{lan:"en-US",text:"英文"},user_photo:this.props.login.user_photo,user_id:this.props.login.user_id,author:this.props.login.user_name,content:[{word:"",definition:"",familiarity:0,pictureURL:"",pictureName:"",empty:""},{word:"",definition:"",familiarity:0,pictureURL:"",pictureName:"",empty:""}]}}):null!==this.props.editCollection&&this.setState({collection:this.props.editCollection}))}},{key:"render",value:function(){var e,n=this;e="new"===this.props.match.params.id;var t=this.state.collection.public;return t=t?"open":"close","建立"!==this.state.submitOK&&this.props.login.login&&"anonymous"!==this.props.login.user_id?"更新"===this.state.submitOK?r.a.createElement(l.a,{to:"/Collection/"+this.props.match.params.id}):r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"collection_info"},r.a.createElement("input",{placeholder:"字卡集標題",ref:this.textInput,onChange:this.changeTitle,style:{borderBottom:this.state.borderBottom},value:this.state.collection.title}),r.a.createElement("div",{className:"select-box"},r.a.createElement("select",{onChange:this.changePublicState,value:t},r.a.createElement("option",{value:"open"},"公開"),r.a.createElement("option",{value:"close"},"不公開")))),r.a.createElement("div",{className:"add-from-file"},r.a.createElement("label",{onChange:this.uploadXlsx}," + 從 xlsx 檔案匯入",r.a.createElement("span",{style:{color:"silver"}},"（請將詞語放置 A 欄，定義放置 B 欄）"),r.a.createElement("input",{type:"file",style:{display:"none"},accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}))),r.a.createElement("div",{className:"card_info"},r.a.createElement("div",{className:"select-box"},r.a.createElement("select",{onChange:this.changeWordLan,value:this.state.collection.word_lan.lan},this.state.language.map(function(e,n){return r.a.createElement("option",{key:n,value:e.lan},e.text)}))),r.a.createElement("div",{className:"select-box"},r.a.createElement("select",{onChange:this.changeDefinitionLan,value:this.state.collection.definition_lan.lan},this.state.language.map(function(e,n){return r.a.createElement("option",{key:n,value:e.lan},e.text)}))),this.state.collection.content.map(function(e,t){return r.a.createElement(Ae,{key:t,label:t,word:e.word,definition:e.definition,pictureName:e.pictureName,pictureURL:e.pictureURL,wordChange:n.wordChange,definitionChange:n.definitionChange,deleteCard:n.deleteCard,empty:e.empty,compressImg:n.compressImg,deleteImg:n.deleteImg})}),r.a.createElement("div",{className:"add_card",onClick:this.addNewCard},r.a.createElement("span",null," + 新增單詞卡"))),r.a.createElement("button",{onClick:this.submitCollection,style:{display:e?"block":"none"}},"建立"),r.a.createElement("button",{onClick:this.submitCollection,style:{display:e?"none":"block"}},"更新")):r.a.createElement(l.a,{to:"/"})}}])&&Ue(t.prototype,o),i&&Ue(t,i),n}(),Ge=Object(u.compose)(Object(s.b)(function(e,n){var t=n.match.params.id,o=e.firestore.data.collection;return{editCollection:o?o[t]:null,login:e.login.loginState,submitStatus:e.collection.submitStatus}},function(e){return{addNewCollection:function(n,t){e(function(e,n){return function(t,o,r){var i,a,c=r.getFirestore,l=new Date;i=l.getHours()<10?"0".concat(l.getHours()):l.getHours(),a=l.getMinutes()<10?"0".concat(l.getMinutes()):l.getMinutes();var s=l.getFullYear()+"-"+(l.getMonth()+1)+"-"+l.getDate()+" "+i+":"+a;c().collection("collection").add(_({},e,{timestamp:s,copyFromOther:!1})).then(function(){t({type:S,typeStr:n})}).catch(function(e){console.log(e),alert("發生問題請再試一次")})}}(n,t))},updateCollection:function(n,t,o){e(j(n,t,o))},resetSubmitStatus:function(){e({type:N})}}}),Object(F.firestoreConnect)([{collection:"collection"}]))(Ke);function Qe(e){return(Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xe(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Je(e){return(Je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ye(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ve(e,n){return(Ve=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}var Ze=function(e){function n(e){var t,o,i;return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),o=this,(t=!(i=Je(n).call(this,e))||"object"!==Qe(i)&&"function"!=typeof i?Ye(o):i).textInput=r.a.createRef(),t.focusTextInput=t.focusTextInput.bind(Ye(t)),t}var t,o,i;return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&Ve(e,n)}(n,r.a.Component),t=n,(o=[{key:"focusTextInput",value:function(){this.textInput.current.focus()}},{key:"componentDidUpdate",value:function(e){e.count!==this.props.count&&this.focusTextInput()}},{key:"render",value:function(){return r.a.createElement("div",{style:{display:this.props.ouputDiasplay?"none":"block"}},r.a.createElement("h1",null,this.props.definition&&this.props.definition),r.a.createElement("form",{onSubmit:this.props.checkAnswer},r.a.createElement("input",{name:"answer",autoComplete:"off",ref:this.textInput,value:this.props.answer,onChange:this.props.changeAnswer})),r.a.createElement("p",{style:{color:"silver"}},"（按 Enter 送出答案）"))}}])&&Xe(t.prototype,o),i&&Xe(t,i),n}();function $e(e){return($e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function en(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function nn(e){return(nn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function on(e,n){return(on=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}var rn=function(e){function n(e){var t,o,r;return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),o=this,(t=!(r=nn(n).call(this,e))||"object"!==$e(r)&&"function"!=typeof r?tn(o):r).state={android:!1},t.keyHandle=t.keyHandle.bind(tn(t)),t}var t,o,i;return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&on(e,n)}(n,r.a.Component),t=n,(o=[{key:"keyHandle",value:function(e){32===e.keyCode&&this.props.nextQuestion()}},{key:"componentDidMount",value:function(){!!navigator.userAgent&&/(android)/i.test(navigator.userAgent)&&this.setState({android:!0})}},{key:"componentDidUpdate",value:function(){this.props.ouputDiasplay?document.body.addEventListener("keyup",this.keyHandle):!1===this.props.ouputDiasplay&&document.body.removeEventListener("keyup",this.keyHandle)}},{key:"componentWillUnmount",value:function(){document.body.removeEventListener("keyup",this.keyHandle)}},{key:"render",value:function(){return r.a.createElement("div",{style:{display:this.props.ouputDiasplay?"block":"none"}},r.a.createElement("h1",{style:{color:this.props.outputColor}},this.props.output),r.a.createElement("p",{style:{fontSize:"20px",marginBottom:"5px"}},this.props.definition," / ",this.props.word),r.a.createElement("button",{onClick:this.props.nextQuestion},"點擊",r.a.createElement("span",{style:{display:this.state.android?"none":"inline"}}," / 空白鍵"),"繼續"))}}])&&en(t.prototype,o),i&&en(t,i),n}();function an(e){return(an="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cn(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ln(e){return(ln=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function un(e,n){return(un=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}var pn=function(e){function n(e){var t,o,i;return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),o=this,(t=!(i=ln(n).call(this,e))||"object"!==an(i)&&"function"!=typeof i?sn(o):i).state={output:"",allNewRound:e.allNewRound,randomIndexArray:"",questionCount:"",answer:"",roundStart:!1,doneTest:e.doneTest},t.textInput=r.a.createRef(),t.focusTextInput=t.focusTextInput.bind(sn(t)),t.changeAnswer=t.changeAnswer.bind(sn(t)),t.testStart=t.testStart.bind(sn(t)),t.checkAnswer=t.checkAnswer.bind(sn(t)),t.nextQuestion=t.nextQuestion.bind(sn(t)),t.restartTest=t.restartTest.bind(sn(t)),t}var t,o,i;return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&un(e,n)}(n,r.a.Component),t=n,(o=[{key:"focusTextInput",value:function(){this.textInput.current.focus()}},{key:"changeAnswer",value:function(e){this.setState({answer:e.target.value})}},{key:"testStart",value:function(){this.setState({allNewRound:!1});for(var e=[],n=0;n<this.props.collection.content.length;n++)e.push({index:n,familiarity:this.props.collection.content[n].familiarity});var t,o,r=[];if((e=e.filter(function(e){return e.familiarity<100})).length>0)for(var i=0;i<e.length;i++)for(var a=(100-e[i].familiarity)/20,c=0;c<a;c++)r.push(e[i]);for(var l=0;l<r.length;l++)o=Math.floor(Math.random()*r.length),t=r[l],r[l]=r[o],r[o]=t;r.length>0&&this.setState({randomIndexArray:r,questionCount:0,roundStart:!0})}},{key:"checkAnswer",value:function(e){var n=this.state.randomIndexArray[this.state.questionCount].index;e.preventDefault();var t=this.props.collection;new FormData(e.target).get("answer").toUpperCase()===t.content[n].word.toUpperCase()?(t.content[n].familiarity<100&&(t.content[n].familiarity=t.content[n].familiarity+20),this.setState({output:"答對了"})):(t.content[n].familiarity>0&&(t.content[n].familiarity=t.content[n].familiarity-20),this.setState({output:"答錯了"}));var o=this.props.match.params.id;this.props.updateCollection(t,o)}},{key:"nextQuestion",value:function(){var e;e=this.state.randomIndexArray.length<5?this.state.randomIndexArray.length-1:4,this.state.questionCount<e?this.setState(function(e){return{questionCount:e.questionCount+1,answer:"",output:""}}):this.setState({roundStart:!1,answer:"",output:""})}},{key:"restartTest",value:function(){for(var e=this.props.collection,n=0;n<e.content.length;n++)e.content[n].familiarity=0;this.setState({doneTest:!1});var t=this.props.match.params.id;this.props.updateCollection(e,t)}},{key:"componentDidUpdate",value:function(e){if(this.props!==e&&null!==this.props.collection){var n=this.props.collection.content.filter(function(e){return 0===e.familiarity});n.length===this.props.collection.content.length&&this.setState({allNewRound:!0}),(n=this.props.collection.content.filter(function(e){return 100===e.familiarity})).length===this.props.collection.content.length&&this.setState({doneTest:!0})}}},{key:"render",value:function(){var e,n,t;""!==this.state.randomIndexArray&&void 0!==this.state.randomIndexArray[this.state.questionCount]&&(e=this.state.randomIndexArray[this.state.questionCount].index,n=this.props.collection.content[e].definition,t=this.props.collection.content[e].word);var o,i=!1;""!==this.state.output&&(i=!0),o="答錯了"===this.state.output?"red":"green";var a=0,s=!1,u=this.props.login.user_id;if(null!==this.props.collection){for(var p=0;p<this.props.collection.content.length;p++)a+=this.props.collection.content[p].familiarity;a=Math.floor(a/this.props.collection.content.length),this.props.collection.user_id!==u&&(s=!0)}return s||!this.props.login.login?r.a.createElement(l.a,{to:"/"}):r.a.createElement("div",{className:"content"},r.a.createElement(c.b,{className:"back_to_collection",to:"/Collection/"+this.props.match.params.id}),r.a.createElement("div",{className:"test_area"},r.a.createElement("div",{className:"test_guide",style:{display:this.state.allNewRound?"block":"none"}},r.a.createElement("h1",null,"測驗說明"),r.a.createElement("p",null,"每次測驗將隨機出現 1-5 題"),r.a.createElement("p",null,"每答對一題熟悉程度",r.a.createElement("span",{style:{color:"green"}}," +20%")),r.a.createElement("p",null,"每答錯一題熟悉程度",r.a.createElement("span",{style:{color:"red"}},"  -20%")),r.a.createElement("button",{onClick:this.testStart},"開始測驗")),r.a.createElement("div",{className:"continue_test",style:{display:this.state.allNewRound?"none":"block"}},r.a.createElement("div",{style:{display:this.state.roundStart?"none":"block"}},r.a.createElement("h1",null,"目前進度"),r.a.createElement("p",{className:"familiarity_description"},"熟悉程度平均"),r.a.createElement("p",{className:"average_percent"},a,"%"),r.a.createElement("button",{onClick:this.testStart,style:{display:this.state.doneTest?"none":"block"}},"繼續測驗"),r.a.createElement("p",{style:{display:this.state.doneTest?"block":"none"}},"恭喜！已熟悉所有字卡"),r.a.createElement("button",{onClick:this.restartTest,style:{display:this.state.doneTest?"block":"none"}},"重置測驗"))),r.a.createElement("div",{className:"test",style:{display:this.state.roundStart?"block":"none"}},r.a.createElement(Ze,{ouputDiasplay:i,count:this.state.questionCount,definition:n,changeAnswer:this.changeAnswer,answer:this.state.answer,checkAnswer:this.checkAnswer}),r.a.createElement(rn,{ouputDiasplay:i,outputColor:o,output:this.state.output,nextQuestion:this.nextQuestion,definition:n,word:t}))))}}])&&cn(t.prototype,o),i&&cn(t,i),n}(),dn=Object(u.compose)(Object(s.b)(function(e,n){var t=n.match.params.id,o=e.firestore.data.collection,r=o?o[t]:null,i=!1,a=!1;if(null!==r){var c=r.content.filter(function(e){return 0===e.familiarity});c.length===r.content.length&&(i=!0),(c=r.content.filter(function(e){return 100===e.familiarity})).length===r.content.length&&(a=!0)}return{collection:r,allNewRound:i,doneTest:a,login:e.login.loginState}},function(e){return{updateCollection:function(n,t){e(j(n,t))}}}),Object(F.firestoreConnect)([{collection:"collection"}]))(pn);function hn(e){return(hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},o=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.forEach(function(n){mn(e,n,t[n])})}return e}function mn(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function gn(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function bn(e){return(bn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xn(e,n){return(xn=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}var vn=function(e){function n(e){var t,o,r;return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),o=this,(t=!(r=bn(n).call(this,e))||"object"!==hn(r)&&"function"!=typeof r?yn(o):r).state={cardsArray:"",count:0,roundOver:"",roundOverTime:"",gameTime:""},t.gameStart=t.gameStart.bind(yn(t)),t.startTimer=t.startTimer.bind(yn(t)),t.pickCard=t.pickCard.bind(yn(t)),t.deleteBorder=t.deleteBorder.bind(yn(t)),t.checkRoundOver=t.checkRoundOver.bind(yn(t)),t}var t,o,i;return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&xn(e,n)}(n,r.a.Component),t=n,(o=[{key:"gameStart",value:function(e){var n=e.slice(),t=[];if(null!==n){var o,r,i=[];if(n.length<4)for(var a=0;a<n.length;a++)for(var c=0;c<2;c++)i.push(n[a]);else i=n;for(var l=0;l<i.length;l++)r=Math.floor(Math.random()*i.length),o=i[l],i[l]=i[r],i[r]=o;i.splice(4,i.length-4);for(var s=0;s<i.length;s++)for(var u=0;u<2;u++)t.push(i[s]);for(var p=0;p<8;p++)t[p]=fn({},t[p],p%2==0?{show:t[p].word}:{show:t[p].definition});for(var d=0;d<t.length;d++)r=Math.floor(Math.random()*t.length),o=t[d],t[d]=t[r],t[r]=o;for(var h=0;h<8;h++)t[h]=fn({},t[h],{label:h})}this.setState({cardsArray:t,roundOver:!1,gameTime:"00:00"}),this.startTimer(0,1)}},{key:"startTimer",value:function(e,n){var t,o=this,r=setInterval(function(){e<10&&n<10?t="0".concat(e,":0").concat(n):e<10?t="0".concat(e,":").concat(n):n<10&&(t="".concat(e,":0").concat(n)),60===++n&&(e++,n=0),o.setState({gameTime:t}),o.state.roundOver&&clearInterval(r)},1e3)}},{key:"pickCard",value:function(e){var n=this,t=this.state.cardsArray.slice(),o=this.state.count;if(void 0===t[e.label].border&&this.state.count<2&&(t[e.label]=fn({},t[e.label],{border:"active"}),this.setState({cardsArray:t}),this.setState(function(e){return{count:e.count+1}}),o++),2===o){var r=t.filter(function(e){return void 0!==e.border});(r=r.filter(function(e){return"correct"!==e.border}))[0].word===r[1].word&&r[0].show!==r[1].show?(t[r[0].label].border="correct",t[r[1].label].border="correct",this.setState({count:0}),setTimeout(function(){n.checkRoundOver()},800)):(t[r[0].label].border="wrong",t[r[1].label].border="wrong",setTimeout(function(){n.deleteBorder()},1e3))}}},{key:"deleteBorder",value:function(){var e=this.state.cardsArray.slice(),n=e.filter(function(e){return"wrong"===e.border});delete e[n[0].label].border,delete e[n[1].label].border,this.setState({cardsArray:e,count:0})}},{key:"checkRoundOver",value:function(){8===this.state.cardsArray.filter(function(e){return"correct"===e.border}).length&&this.setState({roundOver:!0,roundOverTime:this.state.gameTime})}},{key:"componentDidMount",value:function(){null!==this.props.collectionContent&&this.gameStart(this.props.collectionContent)}},{key:"componentDidUpdate",value:function(e){this.props.collectionContent!==e.collectionContent&&this.gameStart(this.props.collectionContent)}},{key:"render",value:function(){var e=this;return this.props.login.login?r.a.createElement("div",{className:"content game_area"},r.a.createElement(c.b,{className:"back_to_collection",to:"/Collection/"+this.props.match.params.id}),r.a.createElement("h2",{className:"game_time",style:{display:this.state.roundOver?"none":"block"}},this.state.gameTime),this.state.cardsArray&&this.state.cardsArray.map(function(n,t){return r.a.createElement(kn,{key:t,label:n.label,show:n.show,word:n.word,pickCard:e.pickCard,border:n.border})}),r.a.createElement("div",{className:"popup-overlay",style:{display:this.state.roundOver?"flex":"none"}},r.a.createElement("div",{className:"deletecheck-popup"},"你花了",this.state.roundOverTime,"完成遊戲！",r.a.createElement("button",{className:"cancel",onClick:this.gameStart.bind(this,this.props.collectionContent)},"再玩一次"),r.a.createElement(c.b,{className:"cancel",to:"/Collection/"+this.props.match.params.id},"繼續背誦"),r.a.createElement("div",{className:"deletecheck-popup-background"})))):r.a.createElement(l.a,{to:"/"})}}])&&gn(t.prototype,o),i&&gn(t,i),n}(),wn=Object(u.compose)(Object(s.b)(function(e,n){var t=n.match.params.id,o=e.firestore.data.collection;return{collectionContent:o?o[t].content:null,login:e.login.loginState}}),Object(F.firestoreConnect)([{collection:"collection"}]))(vn);function kn(e){return r.a.createElement("div",{className:"game_card ".concat(e.border),onClick:e.pickCard.bind(this,e)},r.a.createElement("div",{className:"show_word"},e.show))}function _n(e){return(_n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function En(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Sn(e,n){return!n||"object"!==_n(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function On(e){return(On=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Cn(e,n){return(Cn=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}var jn=function(e){function n(e){return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),Sn(this,On(n).call(this,e))}var t,o,i;return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&Cn(e,n)}(n,r.a.Component),t=n,(o=[{key:"componentDidUpdate",value:function(e){this.props!==e&&this.props.getCollection()}},{key:"render",value:function(){var e=this.props.login.user_id,n=this.props.collectionInfo,t=!1,o="",i=this.props.match.params.keyword;return void 0!==n&&(0===(n=(n=n.filter(function(n){return n.user_id===e||n.public})).filter(function(e){return e.title.toUpperCase().trim().includes(i.toUpperCase())||e.author.toUpperCase().trim().includes(i.toUpperCase())||e.definition_lan.text.trim().includes(i)||e.word_lan.text.trim().includes(i)})).length?(t=!0,o=""):o=r.a.createElement("div",{className:"page_location page_active"},"搜尋結果（",n.length,"）")),r.a.createElement("div",{className:"content"},o,n&&n.map(function(e,n){return r.a.createElement(ae,{key:n,label:n,title:e.title,contentLength:e.content.length,wordLan:e.word_lan.text,defLan:e.definition_lan.text,author:e.author,time:e.timestamp,id:e.id,public:e.public,copyFromOther:e.copyFromOther,user_photo:e.user_photo})}),r.a.createElement("h2",{className:"search_none",style:{display:t?"block":"none"}},"抱歉！無此關鍵字字卡集",r.a.createElement("br",null),"請使用其他關鍵字試試看"))}}])&&En(t.prototype,o),i&&En(t,i),n}(),Nn=Object(u.compose)(Object(s.b)(function(e){return{getData:e.collection.getCollection,collectionInfo:e.firestore.ordered.collection,login:e.login.loginState}},function(e){return{alreadyHadCollection:function(n){e(I(n))},getCollection:function(){e(A())}}}),Object(F.firestoreConnect)([{collection:"collection",orderBy:["timestamp","desc"]}]))(jn);function Pn(e){return(Pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tn(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function In(e,n){return!n||"object"!==Pn(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function zn(e){return(zn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function An(e,n){return(An=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}var Rn=function(e){function n(e){var t;return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),(t=In(this,zn(n).call(this,e))).state={showCollectionNumber:""},t}var t,o,i;return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&An(e,n)}(n,r.a.Component),t=n,(o=[{key:"componentDidUpdate",value:function(e){this.props!==e&&this.props.getCollection()}},{key:"render",value:function(){if(!this.props.login.login)return r.a.createElement(l.a,{to:"/"});var e=this.props.collectionInfo;return void 0!==e&&(e=e.filter(function(e){return e.public})).splice(9),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"page_location page_active"},"全站近期新增"),e&&e.map(function(e,n){return r.a.createElement(ae,{key:n,label:n,title:e.title,contentLength:e.content.length,wordLan:e.word_lan.text,defLan:e.definition_lan.text,author:e.author,time:e.timestamp,id:e.id,public:e.public,copyFromOther:e.copyFromOther,user_photo:e.user_photo})}))}}])&&Tn(t.prototype,o),i&&Tn(t,i),n}(),Ln=Object(u.compose)(Object(s.b)(function(e){return{getData:e.collection.getCollection,collectionInfo:e.firestore.ordered.collection,login:e.login.loginState}},function(e){return{getCollection:function(){e(A())}}}),Object(F.firestoreConnect)([{collection:"collection",orderBy:["timestamp","desc"]}]))(Rn);function Hn(e){return(Hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dn(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Bn(e,n){return!n||"object"!==Hn(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function Fn(e){return(Fn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Un(e,n){return(Un=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}var Mn=Object(u.createStore)(U,Object(p.composeWithDevTools)(Object(u.applyMiddleware)(d.a.withExtraArgument({getFirebase:F.getFirebase,getFirestore:B.getFirestore})),Object(B.reduxFirestore)(W.a),Object(F.reactReduxFirebase)(W.a,{attachAuthIsReady:!0}))),Wn=function(e){function n(){return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),Bn(this,Fn(n).apply(this,arguments))}var t,o,i;return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&Un(e,n)}(n,r.a.Component),t=n,(o=[{key:"render",value:function(){return r.a.createElement(s.a,{store:Mn},r.a.createElement(c.a,null,r.a.createElement(V,null),r.a.createElement(ie,null),r.a.createElement(Z,null),r.a.createElement(l.b,{path:"/",exact:!0,component:he}),r.a.createElement(l.b,{path:"/Recent/",exact:!0,component:Ln}),r.a.createElement(l.b,{path:"/Search/:keyword",exact:!0,component:Nn}),r.a.createElement(l.b,{path:"/Collection/:id",exact:!0,component:je}),r.a.createElement(l.b,{path:"/MakingCards/:id",exact:!0,component:Ge}),r.a.createElement(l.b,{path:"/Test/:id",exact:!0,component:dn}),r.a.createElement(l.b,{path:"/MatchGame/:id",exact:!0,component:wn})))}}])&&Dn(t.prototype,o),i&&Dn(t,i),n}();Mn.firebaseAuthIsReady.then(function(){a.a.render(r.a.createElement(Wn,null),document.getElementById("root"))})}});